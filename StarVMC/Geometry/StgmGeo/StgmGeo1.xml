<Document  file="StarVMC/Geometry/StgmGeo/StgmGeo3.xml">

<Replace match="GeV">*1.0E+0;</Replace>    
<Replace match="MeV">*1.0E-3;</Replace>    
<Replace match="keV">*1.0E-6;</Replace>

<Module name="StgmGeo1" comment="Forward Tracking System Geometry / development for sTGC tracker">

  <Created date="08/06/2018" />
  <Author  name="Zhenyu Chen" />
  <CDE>AGECOM,GCONST,GCUNIT</CDE>
  
  <Content>
    STGM,  <!-- FTS Mother volume -->    
    FTSD, <!-- Volume for each FTS disk           -->
    FTSA, <!-- Active volume for each FTS disk    -->
    FTSS, <!-- Support material for each FTS disk -->
    TGCG,   <!-- Volume for sTGC gas -->
    TGCP, <!-- sTGC PCB board -->
    TGCH, <!-- sTGC honeycomb-->
    TFEA,
    TFEP,    <!-- TPC FEE plate -->
    TFER,    <!-- TPC FEE rib -->
    TFEI,    <!-- TPC FEE itself -->
    RDOC    <!-- TPC RDO card -->
    
  </Content>

  <Structure name="MAIN" comment="Main configuration control structure, selects version at run time">
    <var name="version" type="float" />
    <var name="type"    type="int" />
    <var name="useids"  type="float" />
    <var name="active(20)" type="float" />
    <var name="rmnDSK" type="float" /> <!-- min disk radius -->
    <var name="rmxDSK" type="float" /> <!-- max disk radius -->
    <var name="cutele" type="float" />
    <var name="rotatez" type="float" />
    <var name="rotateztgc" type="float" />
    <var name="zsi(7)"  type="float" />
  </Structure>

  <Structure name="FDSK" comment="Description of each disk">
    <var name="version" type="float" />
    <var  name="diskid"   type="int"   />
    <var  name="x"    type="float" />
    <var  name="y"    type="float" />
    <var  name="z"    type="float" />
    <var  name="rmax" type="float" />
    <var  name="rmin" type="float" />
    <var  name="rmaxsens" type="float" />
    <var  name="rminsens" type="float" />
    <var  name="thksens" type="float" />
    <var  name="thksupp" type="float" />
  </Structure>
  
  <Structure name="TFEE"  >
      <var name="Vers" type="float"  />
      <var name="CardDX" type="float"  />
      <var name="CardDY" type="float"  />
      <var name="CardDZ" type="float"  />
      <var name="PlateDX" type="float"  />
      <var name="PlateDY" type="float"  />
      <var name="PlateDZ" type="float"  />
      <var name="AssemblyThickness" type="float"  />
      <var name="RibDX" type="float"  />
      <var name="RibDY" type="float"  />
      <var name="RibDZ" type="float"  />
      <var name="Ass(3)" type="float"  />
  </Structure>

  <Structure name="TRDO"  >
      <var name="dxRDO" type="float"  />
      <var name="dyRDO" type="float"  />
      <var name="dzRDO" type="float"  />
  </Structure>
  
  <varlist type="int">
    ndisk/0/, idisk/0/, i, j, k
  </varlist>

  <varlist type="INTEGER"  >
      kBlack,kRed,kGreen,kBlue,kYellow,kViolet,kLightBlue
  </varlist>
  
  <varlist type="REAL">INCH,CM</varlist>
  
  <Parameter name="INCH" value="2.54"  />
  <Parameter name="CM" value="1."  />
  
  <varlist type="float">
    zmin,    <!-- minimum z for mother volume -->
    zmax,    <!-- maximum z for mother volume -->
    rmin,    <!-- minimum r for mother volume -->
    rmax,    <!-- maximum r for mother volume -->
    xcenter, <!-- used for positioning volumes -->
    ycenter, <!-- used for positioning volumes -->
    zcenter, <!-- used for positioning volumes -->
    zdisk,
    dzdisk,
    Rin/0/,
    Rout/0/,
  </varlist>
  
  <!-- sTGC pars -->
  <varlist type="REAL">
      xstgc12(4), <!-- x,y center of stgc quadrant disk1,2 -->
      ystgc12(4), <!-- x,y center of stgc quadrant disk1,2  -->
      xstgc34(4), <!-- x,y center of stgc quadrant disk3,4  -->
      ystgc34(4), <!-- x,y center of stgc quadrant disk3,4 -->
      dxstgc12upper,
      dystgc12upper,
      dxstgc12lower,
      dystgc12lower,
      dxstgc34upper,
      dystgc34upper,
      dxstgc34lower,
      dystgc34lower,
      dzstgcgas, <!-- gas volume thickness -->
      dzstgcpcb, <!-- PCB thickness -->
      dzstgchcp, <!-- honeycomb thichness -->
      dxstgcfee,
      dystgcfee,
      dystgcrdo,
      dxstgcrdo
  </varlist>
  
  <varlist type="int"> station, nstgcfee(5) </varlist>
  
  <Inline name="eta2tan" type="real">
    <Arguement type="real" name="etax" />
    <Return value="tan(2*atan(exp(-etax)))" />
  </Inline>

  <Fill name="MAIN" comment="Select configuration" >
    <var name="version" value="3.0" comment="selector" />
    <var name="useids"  value="1.0" comment="defines placement 0=in cave, 1=in idsm" />
    <var name="active"  value="{1,1,1,1,1, 1,1,1,1,1, 1,1,1,1,1, 1,1,1,1,1}" comment="switch on/off up to 20 disks" />
    <var name="rmnDSK"  value="2.25" comment="default disk inner radius" />
    <var name="rmxDSK"  value="32.5" comment="default disk outer radius" />
    <var name="cutele"  value="1 MeV" comment="electron propagation threshold" />
    <var name="type"    value="1" comment="This is combined Si+sTGC" />
    <var name="rotatez" value="0" comment="rotation angles for disk 2 and 3"/>
    <var name="rotateztgc" value="0" comment="tgc rotation angles for disk 2, 3 and 4"/>
    <var name="zsi"     value="{93.3, 140.0, 186.6, 280.9, 303.7, 326.6, 349.4}" comment="Positions of the Si+TGC disks" />
  </Fill>
  <Use struct="MAIN" />
  
  <Fill name="TFEE" comment="// frontEndElectronics"  >
      <var name="Vers" value="1" comment="// version of FrontEndElectronics "  />
      <var name="CardDX" value="1.47*0.110*INCH/2" comment="// 1.47 scale factor account for 9 lb of cables "  />
      <var name="CardDY" value="2.900*INCH/2" comment="//... "  />
      <var name="CardDZ" value="7.000*INCH/2" comment="//... "  />
      <var name="PlateDX" value="0.110*INCH/2" comment="//... "  />
      <var name="PlateDY" value="1.480*INCH" comment="//... "  />
      <var name="PlateDZ" value="4.650*INCH/2" comment="//... "  />
      <var name="AssemblyThickness" value="TFEE_CardDX + TFEE_PlateDX" comment="//... "  />
      <var name="RibDX" value="0.820*INCH/2 - 2*   TFEE_CardDX" comment="//... "  />
      <var name="RibDY" value="2.900*INCH/2 - 2*   TFEE_CardDX" comment="//... "  />
      <var name="RibDZ" value="TFEE_CardDX" comment="//... "  />
      <var name="Ass" value="{1.6,4,10}" comment="// Fee assembly brik size "  />
  </Fill>
  <Use struct="TFEE"  />
  
  <Fill name="TRDO" comment="// TPC RDO basic dimensions"  >
      <var name="dyRDO" value="45./2" comment="//... "  />
      <var name="dxRDO" value="1.75/2" comment="// A.Lebedev 1 RDO = 5 lb "  />
      <var name="dzRDO" value="17.0/2" comment="//... "  />
  </Fill>
  <Use struct="TRDO"  />

  <If expr="MAIN_version==3.0">
    
    zdisk  = 70.0;
    dzdisk = 23.3333333;
    Rin    = MAIN_rmndsk !2.25
    Rout   = MAIN_rmxdsk !32.25
    
    <!--                                                                                     Geometric paramters for disk 1 -->
    ndisk = ndisk + 1
    <Fill name="FDSK" comment="First disk">
        <var name="version"   value="1.0"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"   comment="z center of disk [cm]" />
        <var name="rmin"      value="Rin-0.5"   comment="minimum radius of disk [cm]" />
        <var name="rmax"      value="Rout+0.5"  comment="maximum radius of disk [cm]" />
        <var name="rminsens"  value="Rin"   comment="minimum radius of sensitive layer [cm]" />
        <var name="rmaxsens"  value="Rout"   comment="maximum radius of sensitive layer [cm]" />
        <var name="thksens"   value="0.03744"    comment="thickness of sensitive layer [cm]" />
        <var name="thksupp"   value="0.8"    comment="thickness of support material [cm]" />
    </Fill>
    zdisk = zdisk + dzdisk
    
    <!--                                                                                     Geometric paramters for disk 2 -->
    ndisk = ndisk + 1
    <Fill name="FDSK" comment="Second disk">
        <var name="version"   value="1.1"    comment="disk version" />
        <var name="diskid"        value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"  comment="z center of disk [cm]" />
    </Fill>
    zdisk = zdisk + dzdisk
    
    <!--                                                                                     Geometric paramters for disk 3 -->
    ndisk = ndisk + 1
    <Fill name="FDSK" comment="Third disk">
        <var name="version"   value="1.2"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk" comment="z center of disk [cm]" />
    </Fill>
    zdisk = zdisk + dzdisk
    
    ndisk = ndisk + 1
    <Fill name="FDSK" comment="Fourth disk">
        <var name="version"   value="1.3"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"  comment="z center of disk [cm]" />
    </Fill>
    zdisk = zdisk + dzdisk
    
    ndisk = ndisk + 1
    <Fill name="FDSK" comment="Fifth disk">
        <var name="version"   value="1.4"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"  comment="z center of disk [cm]" />
    </Fill>
    zdisk = zdisk + dzdisk
    
    ndisk = ndisk + 1
    <Fill name="FDSK" comment="Sixth disk">
        <var name="version"   value="1.5"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"  comment="z center of disk [cm]" />
    </Fill>
    
    
    
    <!--                                                                                     Geometric paramters for disk s -->
    zdisk = 238.0; <!-- place outside magnet -->
    ndisk = ndisk + 1
    Rin  = 6.0
    Rout = (Rin + 30.0) / cos(pi/8.0)
    <Fill name="FDSK" comment="First disk">
        <var name="version"   value="1.0"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"   comment="z center of disk [cm]" />
        <var name="rmin"      value="Rin-0.5"    comment="minimum radius of disk [cm]" />
        <var name="rmax"      value="Rout+0.5"   comment="maximum radius of disk [cm]" />
        <var name="rminsens"  value="Rin"   comment="minimum radius of sensitive layer [cm]" />
        <var name="rmaxsens"  value="Rout"   comment="maximum radius of sensitive layer [cm]" />
        <var name="thksens"   value="0.03744"    comment="thickness of sensitive layer [cm]" />
        <var name="thksupp"   value="0.8"    comment="thickness of support material [cm]" />
    </Fill>
    
    zdisk = 243.0; <!-- second 4 cm separation -->
    ndisk = ndisk + 1
    <Fill name="FDSK" comment="wheel 2">
        <var name="version"   value="1.0"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"   comment="z center of disk [cm]" />
        <var name="rmin"      value="Rin-0.5"    comment="minimum radius of disk [cm]" />
        <var name="rmax"      value="Rout+0.5"   comment="maximum radius of disk [cm]" />
        <var name="rminsens"  value="Rin"   comment="minimum radius of sensitive layer [cm]" />
        <var name="rmaxsens"  value="Rout"   comment="maximum radius of sensitive layer [cm]" />
        <var name="thksens"   value="0.03744"    comment="thickness of sensitive layer [cm]" />
        <var name="thksupp"   value="0.8"    comment="thickness of support material [cm]" />
    </Fill>
    <!--                                                                                     Geometric paramters for disk s -->
    Rout = (Rin+60)/cos(pi/8)
    zdisk = 273.0; <!-- place outside magnet -->
    ndisk = ndisk + 1
    <Fill name="FDSK" comment="wheel 3">
        <var name="version"   value="1.0"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"   comment="z center of disk [cm]" />
        <var name="rmin"      value="Rin-0.5"    comment="minimum radius of disk [cm]" />
        <var name="rmax"      value="Rout+0.5"   comment="maximum radius of disk [cm]" />
        <var name="rminsens"  value="Rin"   comment="minimum radius of sensitive layer [cm]" />
        <var name="rmaxsens"  value="Rout"   comment="maximum radius of sensitive layer [cm]" />
        <var name="thksens"   value="0.03744"    comment="thickness of sensitive layer [cm]" />
        <var name="thksupp"   value="0.8"    comment="thickness of support material [cm]" />
    </Fill>
    
    zdisk = 303.0; <!-- second 4 cm separation -->
    ndisk = ndisk + 1
    <Fill name="FDSK" comment="wheel 4">
        <var name="version"   value="1.0"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"   comment="z center of disk [cm]" />
        <var name="rmin"      value="Rin-0.5"    comment="minimum radius of disk [cm]" />
        <var name="rmax"      value="Rout+0.5"   comment="maximum radius of disk [cm]" />
        <var name="rminsens"  value="Rin"   comment="minimum radius of sensitive layer [cm]" />
        <var name="rmaxsens"  value="Rout"   comment="maximum radius of sensitive layer [cm]" />
        <var name="thksens"   value="0.03744"    comment="thickness of sensitive layer [cm]" />
        <var name="thksupp"   value="0.8"    comment="thickness of support material [cm]" />
    </Fill>
    <!--                                                                                     Geometric paramters for disk s -->
    zdisk = 333.0; <!-- place outside magnet -->
    ndisk = ndisk + 1
    
    <Fill name="FDSK" comment="wheel 5">
        <var name="version"   value="1.0"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"   comment="z center of disk [cm]" />
        <var name="rmin"      value="Rin-0.5"    comment="minimum radius of disk [cm]" />
        <var name="rmax"      value="Rout+0.5"   comment="maximum radius of disk [cm]" />
        <var name="rminsens"  value="Rin"   comment="minimum radius of sensitive layer [cm]" />
        <var name="rmaxsens"  value="Rout"   comment="maximum radius of sensitive layer [cm]" />
        <var name="thksens"   value="0.03744"    comment="thickness of sensitive layer [cm]" />
        <var name="thksupp"   value="0.8"    comment="thickness of support material [cm]" />
    </Fill>
    
    zdisk = 362.0; <!-- second 4 cm separation -->
    ndisk = ndisk + 1
    <Fill name="FDSK" comment="wheel 6">
        <var name="version"   value="1.0"    comment="disk version" />
        <var name="diskid"    value="ndisk"  comment="disk number" />
        <var name="x"         value="0.0"    comment="x center of disk [cm]" />
        <var name="y"         value="0.0"    comment="y center of disk [cm]" />
        <var name="z"         value="zdisk"   comment="z center of disk [cm]" />
        <var name="rmin"      value="Rin-0.5"    comment="minimum radius of disk [cm]" />
        <var name="rmax"      value="Rout+0.5"   comment="maximum radius of disk [cm]" />
        <var name="rminsens"  value="Rin"   comment="minimum radius of sensitive layer [cm]" />
        <var name="rmaxsens"  value="Rout"   comment="maximum radius of sensitive layer [cm]" />
        <var name="thksens"   value="0.03744"    comment="thickness of sensitive layer [cm]" />
        <var name="thksupp"   value="0.8"    comment="thickness of support material [cm]" />
    </Fill>
    
  </If>

  <Use struct="FDSK" />

  <!-- set zmin, zmax, rmin, rmax -->
  <Use struct="FDSK" select="diskid" value="1" />

  zmin = FDSK_z    - FDSK_thksupp
  rmin = FDSK_rmin                 <!-- set mother volume zmin (Assumes all are the same) -->

  <Use struct="FDSK" select="diskid" value="ndisk" />

  zmax = FDSK_z    + FDSK_thksupp
  rmax = FDSK_rmax                  <!-- set mother volume rmax (Assumes last disk is largest) -->


  <!--                                                                Create and place the FSTM mother volume in the CAVE -->

  xcenter = 0
  ycenter = 0
  zcenter = zmin + (zmax-zmin) / 2.0

  <Info format="SELECT MAIN_version = {6.2f}">MAIN_version</Info>
  <Info format="ndisk = {2i}">ndisk</Info>
  <Info format="zmin = {6.2f}">zmin</Info>
  <Info format="zmax = {6.2f}">zmax</Info>
  <Info format="rmin = {6.2f}">rmin</Info>
  <Info format="rmax = {6.2f}">rmax</Info>

  <Create    block="STGM" />
  <Placement block="STGM" in="CAVE" konly="MANY"  
    x="xcenter"
    y="ycenter"
    z="zcenter" />

  <Volume name="STGM" comment="FTS mother volume"  >
    <Material name="Air" />
    <Shape type="tube"
    rmin="rmin"
    rmax="rmax"
    dz="(zmax-zmin)/2.0" />

  <!-- loop over and place all disks -->
  <For var="idisk" from="1" to="ndisk">
    
    <!-- Load disk "idisk" into data structure -->
    <Use struct="FDSK" select="diskid" value="idisk" />
    
    <!-- Create and place the disk -->
    <If expr="MAIN_active(idisk).eq.1">
        <Create    block="FTSD" />
        <Placement block="FTSD" in="STGM" x="FDSK_x" y="FDSK_y" z="FDSK_z-zcenter" ncopy="idisk"   />
        <Info format="Positioning FTSD {2I}">idisk</Info>
    </If>
    
  </For>
  
  <Mixture name="G10" dens="1.7"  >
      <Component name="Si" a="28.08" z="14" w="0.6*1*28./60."  />
      <Component name="O" a="16" z="8" w="0.6*2*16./60. + 0.4*4*16./174."  />
      <Component name="C" a="12" z="6" w="0.4*8*12./174."  />
      <Component name="H" a="1"  z="1" w="0.4*14*1./174."  />
  </Mixture>
  
  <Mixture name="NPCO2" dens="0.2529E-02"  > <!--g/cm3-->
      <Component name="C" a="12" z="6" w="28"  />
      <Component name="H" a="1" z="1" w="54"  />
      <Component name="O" a="16" z="8" w="11"  />
  </Mixture>
  
  <!-- sTGC dimensions -->
  <Assign var="xstgc12" value="{ -22.675, 22.675, -27.755, 27.755}" />
  <Assign var="ystgc12" value="{ 28.375, 28.375, -20.71, -20.71}" />
  <Assign var="xstgc34" value="{ -26.79, 26.79, -31.87, 31.87}" />
  <Assign var="ystgc34" value="{ 32.49, 32.49, -26.79, -26.79}" />

  <Assign var="dxstgc12upper" value="22.675" />
  <Assign var="dystgc12upper" value="22.675" />
  <Assign var="dxstgc12lower" value="17.595" />
  <Assign var="dystgc12lower" value="26.41" />
  <Assign var="dxstgc34upper" value="26.79" />
  <Assign var="dystgc34upper" value="26.79" />
  <Assign var="dxstgc34lower" value="21.71" />
  <Assign var="dystgc34lower" value="32.49" />
  
  <Assign var="dzstgcgas" value="0.14" />
  <Assign var="dzstgcpcb" value="0.075" />
  <Assign var="dzstgchcp" value="0.245" />

  <Assign var="dxstgcfee" value="3.0"/>
  <Assign var="dystgcfee" value="9.0"/>
  <Assign var="dxstgcrdo" value="1.5"/>
  <Assign var="dystgcrdo" value="7.0"/>

  <!-- place sTGC chamber, for now use one gas volume with PCB on each side, PCB is twice thick to account for the 4 PCB material-->
  <Create    block="TGCG"/>
  <Create    block="TGCP"/>
  <Create    block="TGCH"/>
  
  station = 1;
  <Placement block="TGCG" in="STGM" x="xstgc12(1)" y="ystgc12(1)" z="MAIN_zsi(4)-zcenter" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(1)" y="ystgc12(1)" z="MAIN_zsi(4)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(1)" y="ystgc12(1)" z="MAIN_zsi(4)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcpcb*2" />

  <Placement block="TGCG" in="STGM" x="xstgc12(2)" y="ystgc12(2)" z="MAIN_zsi(4)-zcenter" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(2)" y="ystgc12(2)" z="MAIN_zsi(4)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(2)" y="ystgc12(2)" z="MAIN_zsi(4)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcpcb*2" />
  
  <Placement block="TGCG" in="STGM" x="xstgc12(3)" y="ystgc12(3)" z="MAIN_zsi(4)-zcenter" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(3)" y="ystgc12(3)" z="MAIN_zsi(4)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(3)" y="ystgc12(3)" z="MAIN_zsi(4)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcpcb*2" />
  
  <Placement block="TGCG" in="STGM" x="xstgc12(4)" y="ystgc12(4)" z="MAIN_zsi(4)-zcenter" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(4)" y="ystgc12(4)" z="MAIN_zsi(4)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(4)" y="ystgc12(4)" z="MAIN_zsi(4)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcpcb*2" />
  
  <Info format="Positioning sTGC {2I}">station</Info>
  
  station = 2;
  <Placement block="TGCG" in="STGM" x="xstgc12(1)" y="ystgc12(1)" z="MAIN_zsi(5)-zcenter" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(1)" y="ystgc12(1)" z="MAIN_zsi(5)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(1)" y="ystgc12(1)" z="MAIN_zsi(5)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcpcb*2" />
  
  <Placement block="TGCG" in="STGM" x="xstgc12(2)" y="ystgc12(2)" z="MAIN_zsi(5)-zcenter" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(2)" y="ystgc12(2)" z="MAIN_zsi(5)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(2)" y="ystgc12(2)" z="MAIN_zsi(5)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc12upper" dy="dystgc12upper" dz="dzstgcpcb*2" />
  
  <Placement block="TGCG" in="STGM" x="xstgc12(3)" y="ystgc12(3)" z="MAIN_zsi(5)-zcenter" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(3)" y="ystgc12(3)" z="MAIN_zsi(5)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(3)" y="ystgc12(3)" z="MAIN_zsi(5)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcpcb*2" />
  
  <Placement block="TGCG" in="STGM" x="xstgc12(4)" y="ystgc12(4)" z="MAIN_zsi(5)-zcenter" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(4)" y="ystgc12(4)" z="MAIN_zsi(5)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc12(4)" y="ystgc12(4)" z="MAIN_zsi(5)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc12lower" dy="dystgc12lower" dz="dzstgcpcb*2" />
  
  <Info format="Positioning sTGC {2I}">station</Info>

  station = 3;
  <Placement block="TGCG" in="STGM" x="xstgc34(1)" y="ystgc34(1)" z="MAIN_zsi(6)-zcenter" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(1)" y="ystgc34(1)" z="MAIN_zsi(6)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(1)" y="ystgc34(1)" z="MAIN_zsi(6)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcpcb*2" />

  <Placement block="TGCG" in="STGM" x="xstgc34(2)" y="ystgc34(2)" z="MAIN_zsi(6)-zcenter" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(2)" y="ystgc34(2)" z="MAIN_zsi(6)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(2)" y="ystgc34(2)" z="MAIN_zsi(6)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcpcb*2" />
  
  <Placement block="TGCG" in="STGM" x="xstgc34(3)" y="ystgc34(3)" z="MAIN_zsi(6)-zcenter" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(3)" y="ystgc34(3)" z="MAIN_zsi(6)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(3)" y="ystgc34(3)" z="MAIN_zsi(6)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcpcb*2" />
  
  <Placement block="TGCG" in="STGM" x="xstgc34(4)" y="ystgc34(4)" z="MAIN_zsi(6)-zcenter" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(4)" y="ystgc34(4)" z="MAIN_zsi(6)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(4)" y="ystgc34(4)" z="MAIN_zsi(6)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcpcb*2" />
  
  <Info format="Positioning sTGC {2I}">station</Info>

  station = 4;
  <Placement block="TGCG" in="STGM" x="xstgc34(1)" y="ystgc34(1)" z="MAIN_zsi(7)-zcenter" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(1)" y="ystgc34(1)" z="MAIN_zsi(7)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(1)" y="ystgc34(1)" z="MAIN_zsi(7)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcpcb*2" />
  
  <Placement block="TGCG" in="STGM" x="xstgc34(2)" y="ystgc34(2)" z="MAIN_zsi(7)-zcenter" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(2)" y="ystgc34(2)" z="MAIN_zsi(7)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(2)" y="ystgc34(2)" z="MAIN_zsi(7)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc34upper" dy="dystgc34upper" dz="dzstgcpcb*2" />
  
  <Placement block="TGCG" in="STGM" x="xstgc34(3)" y="ystgc34(3)" z="MAIN_zsi(7)-zcenter" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(3)" y="ystgc34(3)" z="MAIN_zsi(7)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(3)" y="ystgc34(3)" z="MAIN_zsi(7)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcpcb*2" />
  
  <Placement block="TGCG" in="STGM" x="xstgc34(4)" y="ystgc34(4)" z="MAIN_zsi(7)-zcenter" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcgas*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(4)" y="ystgc34(4)" z="MAIN_zsi(7)-zcenter+dzstgcgas*2+dzstgcpcb*2" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcpcb*2" />
  <Placement block="TGCP" in="STGM" x="xstgc34(4)" y="ystgc34(4)" z="MAIN_zsi(7)-zcenter-dzstgcgas*2-dzstgcpcb*2" dx="dxstgc34lower" dy="dystgc34lower" dz="dzstgcpcb*2" />
  
  <Info format="Positioning sTGC {2I}">station</Info>

  <Create block="TFEA"  />
  <!-- place sTGC FEEs disk1-->
  <!-- quadrant 1-->
  <Assign var="nstgcfee" value="{5,5,4,3,2}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(1) - dxstgc12upper - dxstgcfee*i" y="ystgc12(1) - dystgc12upper + dystgcfee/2.0 + dystgcfee*(j-1)" z="MAIN_zsi(4)-zcenter-TFEE_cardDZ" ></Placement>
      </Do>
  </Do>
  
  <Assign var="nstgcfee" value="{2,2,2,2,0}" />
  <Do var="i" from="1" to="4" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(1) + dxstgc12upper - dystgcfee*i" y="ystgc12(1) + dystgc12upper + dxstgcfee*j" z="MAIN_zsi(4)-zcenter-TFEE_cardDZ" ><Rotation alphaz="-90" /></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 2 which is reflection of quadrant1-->
  <Assign var="nstgcfee" value="{5,5,4,3,2}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(2) + dxstgc12upper + dxstgcfee*i" y="ystgc12(2) - dystgc12upper + dystgcfee/2.0 + dystgcfee*(j-1)" z="MAIN_zsi(4)-zcenter-TFEE_cardDZ" ><Rotation alphaz="180" /></Placement>
      </Do>
  </Do>
  
  <Assign var="nstgcfee" value="{2,2,2,2,0}" />
  <Do var="i" from="1" to="4" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(2) - dxstgc12upper + dystgcfee*i" y="ystgc12(2) + dystgc12upper + dxstgcfee*j" z="MAIN_zsi(4)-zcenter-TFEE_cardDZ" ><Rotation alphaz="-90" /></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 3-->
  <Assign var="nstgcfee" value="{6,6,5,4,2}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(3) - dxstgc12lower - dxstgcfee*i" y="ystgc12(3) + dystgc12lower - dystgcfee/2.0 - dystgcfee*(j-1)" z="MAIN_zsi(4)-zcenter-TFEE_cardDZ" ></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 4-->
  <Assign var="nstgcfee" value="{6,6,5,4,2}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(4) + dxstgc12lower + dxstgcfee*i" y="ystgc12(4) + dystgc12lower - dystgcfee/2.0 - dystgcfee*(j-1)" z="MAIN_zsi(4)-zcenter-TFEE_cardDZ" ><Rotation alphaz="180" /></Placement>
      </Do>
  </Do>
  
  <!-- place sTGC FEEs disk2-->
  <!-- quadrant 1-->
  <Assign var="nstgcfee" value="{5,5,4,3,2}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(1) - dxstgc12upper - dxstgcfee*i" y="ystgc12(1) - dystgc12upper + dystgcfee/2.0 + dystgcfee*(j-1)" z="MAIN_zsi(5)-zcenter-TFEE_cardDZ" ></Placement>
      </Do>
  </Do>
  
  <Assign var="nstgcfee" value="{2,2,2,2,0}" />
  <Do var="i" from="1" to="4" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(1) + dxstgc12upper - dystgcfee*i" y="ystgc12(1) + dystgc12upper + dxstgcfee*j" z="MAIN_zsi(5)-zcenter-TFEE_cardDZ" ><Rotation alphaz="-90" /></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 2 which is reflection of quadrant1-->
  <Assign var="nstgcfee" value="{5,5,4,3,2}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(2) + dxstgc12upper + dxstgcfee*i" y="ystgc12(2) - dystgc12upper + dystgcfee/2.0 + dystgcfee*(j-1)" z="MAIN_zsi(5)-zcenter-TFEE_cardDZ" ><Rotation alphaz="180" /></Placement>
      </Do>
  </Do>
  
  <Assign var="nstgcfee" value="{2,2,2,2,0}" />
  <Do var="i" from="1" to="4" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(2) - dxstgc12upper + dystgcfee*i" y="ystgc12(2) + dystgc12upper + dxstgcfee*j" z="MAIN_zsi(5)-zcenter-TFEE_cardDZ" ><Rotation alphaz="-90" /></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 3-->
  <Assign var="nstgcfee" value="{6,6,5,4,2}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(3) - dxstgc12lower - dxstgcfee*i" y="ystgc12(3) + dystgc12lower - dystgcfee/2.0 - dystgcfee*(j-1)" z="MAIN_zsi(5)-zcenter-TFEE_cardDZ" ></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 4-->
  <Assign var="nstgcfee" value="{6,6,5,4,2}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc12(4) + dxstgc12lower + dxstgcfee*i" y="ystgc12(4) + dystgc12lower - dystgcfee/2.0 - dystgcfee*(j-1)" z="MAIN_zsi(5)-zcenter-TFEE_cardDZ" ><Rotation alphaz="180" /></Placement>
      </Do>
  </Do>
  
  <!-- place sTGC FEEs disk3-->
  <!-- quadrant 1-->
  <Assign var="nstgcfee" value="{6,5,5,4,3}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(1) - dxstgc34upper - dxstgcfee*i" y="ystgc34(1) - dystgc34upper + dystgcfee/2.0 + dystgcfee*(j-1)" z="MAIN_zsi(6)-zcenter-TFEE_cardDZ" ></Placement>
      </Do>
  </Do>
  
  <Assign var="nstgcfee" value="{2,2,2,2,0}" />
  <Do var="i" from="1" to="4" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(1) + dxstgc34upper - dystgcfee*i" y="ystgc34(1) + dystgc34upper + dxstgcfee*j" z="MAIN_zsi(6)-zcenter-TFEE_cardDZ" ><Rotation alphaz="-90" /></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 2 which is reflection of quadrant1-->
  <Assign var="nstgcfee" value="{6,5,5,4,3}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(2) + dxstgc34upper + dxstgcfee*i" y="ystgc34(2) - dystgc34upper + dystgcfee/2.0 + dystgcfee*(j-1)" z="MAIN_zsi(6)-zcenter-TFEE_cardDZ" ><Rotation alphaz="180" /></Placement>
      </Do>
  </Do>
  
  <Assign var="nstgcfee" value="{2,2,2,2,0}" />
  <Do var="i" from="1" to="4" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(2) - dxstgc34upper + dystgcfee*i" y="ystgc34(2) + dystgc34upper + dxstgcfee*j" z="MAIN_zsi(6)-zcenter-TFEE_cardDZ" ><Rotation alphaz="-90" /></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 3-->
  <Assign var="nstgcfee" value="{7,7,6,5,5}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(3) - dxstgc34lower - dxstgcfee*i" y="ystgc34(3) + dystgc34lower - dystgcfee/2.0 - dystgcfee*(j-1)" z="MAIN_zsi(6)-zcenter-TFEE_cardDZ" ></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 4-->
  <Assign var="nstgcfee" value="{7,7,6,5,5}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(4) + dxstgc34lower + dxstgcfee*i" y="ystgc34(4) + dystgc34lower - dystgcfee/2.0 - dystgcfee*(j-1)" z="MAIN_zsi(6)-zcenter-TFEE_cardDZ" ><Rotation alphaz="180" /></Placement>
      </Do>
  </Do>
  
  <!-- place sTGC FEEs disk4-->
  <!-- quadrant 1-->
  <Assign var="nstgcfee" value="{6,5,5,4,3}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(1) - dxstgc34upper - dxstgcfee*i" y="ystgc34(1) - dystgc34upper + dystgcfee/2.0 + dystgcfee*(j-1)" z="MAIN_zsi(7)-zcenter-TFEE_cardDZ" ></Placement>
      </Do>
  </Do>
  
  <Assign var="nstgcfee" value="{2,2,2,2,0}" />
  <Do var="i" from="1" to="4" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(1) + dxstgc34upper - dystgcfee*i" y="ystgc34(1) + dystgc34upper + dxstgcfee*j" z="MAIN_zsi(7)-zcenter-TFEE_cardDZ" ><Rotation alphaz="-90" /></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 2 which is reflection of quadrant1-->
  <Assign var="nstgcfee" value="{6,5,5,4,3}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(2) + dxstgc34upper + dxstgcfee*i" y="ystgc34(2) - dystgc34upper + dystgcfee/2.0 + dystgcfee*(j-1)" z="MAIN_zsi(7)-zcenter-TFEE_cardDZ" ><Rotation alphaz="180" /></Placement>
      </Do>
  </Do>
  
  <Assign var="nstgcfee" value="{2,2,2,2,0}" />
  <Do var="i" from="1" to="4" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(2) - dxstgc34upper + dystgcfee*i" y="ystgc34(2) + dystgc34upper + dxstgcfee*j" z="MAIN_zsi(7)-zcenter-TFEE_cardDZ" ><Rotation alphaz="-90" /></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 3-->
  <Assign var="nstgcfee" value="{7,7,6,5,5}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(3) - dxstgc34lower - dxstgcfee*i" y="ystgc34(3) + dystgc34lower - dystgcfee/2.0 - dystgcfee*(j-1)" z="MAIN_zsi(7)-zcenter-TFEE_cardDZ" ></Placement>
      </Do>
  </Do>
  
  <!-- quadrant 4-->
  <Assign var="nstgcfee" value="{7,7,6,5,5}" />
  <Do var="i" from="1" to="5" >
      <Assign var="k" value="nstgcfee(i)" />
      <Do var="j" from="1" to="k" >
          <Placement block="TFEA" in="STGM" x="xstgc34(4) + dxstgc34lower + dxstgcfee*i" y="ystgc34(4) + dystgc34lower - dystgcfee/2.0 - dystgcfee*(j-1)" z="MAIN_zsi(7)-zcenter-TFEE_cardDZ" ><Rotation alphaz="180" /></Placement>
      </Do>
  </Do>
  
  <Create block="RDOC"  />
  
  <!--sTGC disk1-->
  <Placement block="RDOC" in="STGM" x="-TRDO_dyRDO - dxstgcrdo" y="ystgc12(4) - dystgc12lower - dystgcrdo" z="MAIN_zsi(4) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="TRDO_dyRDO + dxstgcrdo" y="ystgc12(4) - dystgc12lower - dystgcrdo" z="MAIN_zsi(4) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="-TRDO_dyRDO - dxstgcrdo" y="ystgc12(4) - dystgc12lower - dystgcrdo*2" z="MAIN_zsi(4) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="TRDO_dyRDO + dxstgcrdo" y="ystgc12(4) - dystgc12lower - dystgcrdo*2" z="MAIN_zsi(4) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>

  <!--sTGC disk2-->
  <Placement block="RDOC" in="STGM" x="-TRDO_dyRDO - dxstgcrdo" y="ystgc12(4) - dystgc12lower - dystgcrdo" z="MAIN_zsi(5) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="TRDO_dyRDO + dxstgcrdo" y="ystgc12(4) - dystgc12lower - dystgcrdo" z="MAIN_zsi(5) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="-TRDO_dyRDO - dxstgcrdo" y="ystgc12(4) - dystgc12lower - dystgcrdo*2" z="MAIN_zsi(5) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="TRDO_dyRDO + dxstgcrdo" y="ystgc12(4) - dystgc12lower - dystgcrdo*2" z="MAIN_zsi(5) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>

  <!--sTGC disk3-->
  <Placement block="RDOC" in="STGM" x="-TRDO_dyRDO - dxstgcrdo" y="ystgc34(4) - dystgc34lower - dystgcrdo" z="MAIN_zsi(6) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="TRDO_dyRDO + dxstgcrdo" y="ystgc34(4) - dystgc34lower - dystgcrdo" z="MAIN_zsi(6) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="-TRDO_dyRDO - dxstgcrdo" y="ystgc34(4) - dystgc34lower - dystgcrdo*2" z="MAIN_zsi(6) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="TRDO_dyRDO + dxstgcrdo" y="ystgc34(4) - dystgc34lower - dystgcrdo*2" z="MAIN_zsi(6) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>

  <!--sTGC disk4-->
  <Placement block="RDOC" in="STGM" x="-TRDO_dyRDO - dxstgcrdo" y="ystgc34(4) - dystgc34lower - dystgcrdo" z="MAIN_zsi(7) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="TRDO_dyRDO + dxstgcrdo" y="ystgc34(4) - dystgc34lower - dystgcrdo" z="MAIN_zsi(7) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="-TRDO_dyRDO - dxstgcrdo" y="ystgc34(4) - dystgc34lower - dystgcrdo*2" z="MAIN_zsi(7) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  <Placement block="RDOC" in="STGM" x="TRDO_dyRDO + dxstgcrdo" y="ystgc34(4) - dystgc34lower - dystgcrdo*2" z="MAIN_zsi(7) - zcenter - TRDO_dzRDO"  ><Rotation alphaz="90" /></Placement>
  
  </Volume>
  
  <!--                                                             FTSD represents the disks in the FTS.  One new object
   will be created for each disk based on the dimensions
   provided in the DISK structure -->
  <Volume name="FTSD" comment="FTS disk">
      
      <Attribute for="FTSD" seen="0" colo="3" />
      <Shape type="TUBE"
      rmin="FDSK_rmin"
      rmax="FDSK_rmax"
      dz="FDSK_thksupp" />
      
      <Create    block="FTSA" />
      <Placement block="FTSA" rmin="FDSK_rminsens" rmax="FDSK_rmaxsens" dz="FDSK_thksens" />
      
      <Create    block="FTSS" />
      <Placement block="FTSS" rmin="FDSK_rmin"     rmax="FDSK_rminsens" dz="FDSK_thksupp" />
      <Placement block="FTSS" rmin="FDSK_rmaxsens" rmax="FDSK_rmax"     dz="FDSK_thksupp" />
      
  </Volume>
  
  <!--                                                                                                     Active volume -->
  <Volume name="FTSA" comment="Active volume of the FTS">
      <Attribute for="FTSA" seen="1" colo="4" />
      <Material name="silicon" />
      <Material name="silicon" isvol="1" />
      <Shape type="TUBE"
      rmin="0"
      rmax="0"
      dz="0" />
      
      <Par name="CUTGAM" value="1 MeV" />
      <Par name="CUTELE" value="MAIN_cutele" />
      <Par name="CUTNEU" value="10 keV" />
      <Par name="CUTHAD" value="10 keV" />
      <Par name="CUTMUO" value="10 keV" />
      <Par name="BCUTE"  value="1 MeV" />
      <Par name="DCUTE"  value="10000 GeV" />
      <Par name="DCUTM"  value="10000 GeV" />
      <Par name="PPCUTM" value="10 keV" />
      
      <Instrument block="FTSA"  >
          <Hit meas="zz" opts="S" bins="0.00001"  />
          <Hit meas="yy" opts="S" bins="0.00001"  />
          <Hit meas="xx" opts="S" bins="0.00001"  />
          <Hit meas="z"  opts="S" bins="0.00001"  />
          <Hit meas="y"  opts="S" bins="0.00001"  />
          <Hit meas="x"  opts="S" bins="0.00001"  />
          <Hit meas="ptot" nbits="16" min="0" max="100"  />
          <Hit meas="cx" nbits="10"  />
          <Hit meas="cy" nbits="10"  />
          <Hit meas="cz" nbits="10"  />
          <Hit meas="sleng" nbits="16" min="0" max="500"  />
          <Hit meas="tof" nbits="16"  />
          <Hit meas="step" bins=".0001"  />
          <Hit meas="eloss" nbits="16"  />
      </Instrument>
  </Volume>
  
  <!--                                                                                                 Support strucutres -->
  <Volume name="FTSS" comment="Support structure for each disk"  >
      
      <Attribute for="FTSS" seen="1" colo="3" />
      <Material name="aluminium" />
      <Material name="aluminium" isvol="0" />
      <!--
       <Par name="CUTGAM" value="1 MeV" />
       <Par name="CUTELE" value="MAIN_cutele" />
       <Par name="CUTNEU" value="10 MeV" />
       <Par name="CUTHAD" value="10 MeV" />
       <Par name="CUTMUO" value="10 MeV" />
       <Par name="BCUTE"  value="1 MeV" />
       <Par name="DCUTE"  value="10000 GeV" />
       <Par name="DCUTM"  value="10000 GeV" />
       <Par name="PPCUTM" value="10 MeV" />
       -->
      <Shape type="TUBE"
      rmin="0"
      rmax="0"
      dz="0" />
      
  </Volume>
  
  <!-- sTGC chamber -->
<Volume name="TGCG" comment="sTGC gas volume">
    <Material  name="NPCO2" />
    <Material  name="NPCO2" isvol="1" />
    <Attribute for="TGCG" seen="1" colo="2" serial="station" />
    <Shape type="box" dx="0" dy="0" dz="0" />
    
    <!--<Par name="CUTGAM" value="1 MeV" />
    <Par name="CUTELE" value="MAIN_cutele" />
    <Par name="CUTNEU" value="10 keV" />
    <Par name="CUTHAD" value="10 keV" />
    <Par name="CUTMUO" value="10 keV" />
    <Par name="BCUTE"  value="1 MeV" />
    <Par name="DCUTE"  value="10000 GeV" />
    <Par name="DCUTM"  value="10000 GeV" />
    <Par name="PPCUTM" value="10 keV" />-->
    
    <Instrument block="TGCG"  >
        <!-- Local coordinates 0.1 micron resolution -->
        <Hit meas="z"  opts="S" bins="0.01"  />
        <Hit meas="y"  opts="S" bins="0.01"  />
        <Hit meas="x"  opts="S" bins="0.01"  />
        <!-- Global coordinates 0.1 micron resolution-->
        <Hit meas="zz" opts="S" bins="0.01"  />
        <Hit meas="yy" opts="S" bins="0.01"  />
        <Hit meas="xx" opts="S" bins="0.01"  />
        <!-- Time of flight, energy lost, direction cosines, total momentum -->
        <Hit meas="ptot"  nbits="16" min="0" max="100"  />
        <Hit meas="cx"    nbits="16"  />
        <Hit meas="cy"    nbits="16"  />
        <Hit meas="cz"    nbits="16"  />
        <Hit meas="tof"   nbits="16"  />
        <Hit meas="eloss" nbits="16"  />
    </Instrument>
    
</Volume>

<Block name="TGCP" comment="sTGC PCB board">
    <Material  name="G10" />
    <Attribute for="TGCP" seen="1" colo="4" />
    <Shape type="box" dx="0" dy="0" dz="0" />
</Block>

<Block name="TGCH" comment="sTGC honeycomb">
    <Material  name="Air" />
    <Attribute for="TGCH" seen="1" colo="42" />
    <Shape type="box" dx="0" dy="0" dz="0" />
</Block>

<!-- sTGC FEEs -->

<Block name="TFEA" comment="TGeoVolumeAssembly(FEE)"  >
    
    <Attribute for="TFEA"
    seen="1"
    colo="kGreen"
    />
    
    <Shape type="bbox"
    dx="TFEE_ass(1)"
    dy="TFEE_ass(2)"
    dz="TFEE_ass(3)"
    />
    
    <Attribute for="TFEA"
    seen="1"
    colo="42"
    />
    
    <Create block="TFEP"  />  <Placement block="TFEP"  />
    <Create block="TFER"  />  <Placement block="TFER" x="-TFEE_RibDX-TFEE_CardDX" />
    <Create block="TFEI"  />  <Placement block="TFEI" x="2*TFEE_CardDX" z="0.5" />
    
</Block>

<Block name="TFEP" comment="TFEPlate"  >
    <Attribute for="TFEP" seen="1" colo="kRed"  />
    <Material name="ALUMINIUM"  />
    <Shape type="bbox"       dz="TFEE_PlateDZ" dx="TFEE_PlateDX" dy="TFEE_PlateDY"  />
</Block>

<Block name="TFER" comment="TFERib"  >
    <Attribute for="TFER" seen="1" colo="1"  />
    <Material name="ALUMINIUM"  />
    <Shape type="bbox" dz="TFEE_RibDZ" dx="TFEE_RibDX" dy="TFEE_RibDY"  />
</Block>

<Block name="TFEI" comment="TFEItself"  >
    <Attribute for="TFEI" seen="1" colo="kViolet"  />
    <Material name="G10"  />
    <Shape type="bbox" dz="TFEE_CardDZ" dx="TFEE_CardDX" dy="TFEE_CardDY"  />
</Block>

<Block name="RDOC" comment="RDOCard"  >
    <Attribute for="RDOC" seen="1" colo="kBlue"  />
    <Material name="G10"  />
    <Shape type="bbox" dz="TRDO_dzRDO" dx="TRDO_dxRDO" dy="TRDO_dyRDO" />
</Block>

</Module>
<!--  ================================================================================================================ -->
</Document>

