<Document  file="StarVMC/Geometry/BtofGeo/BtofGeo5.xml">

    <Module name="BTOFGEO5" comment=" is the Geometry of Barrel Trigger / Time Of Flight system  "  >

        <Author name="W.J. Llope"  />
        <Created date="    29 December 1999 "  />
        <CDE  >
            AGECOM
            GCUNIT
            GCONST
        </CDE>
        
        <Content  >
            BTOF,BTOH,BSEC,BTRA,BUND,BTFT,BASE,BARM,BANG,BWAT,BCOV,BXTR,BMTC,BTTC,BMAA,BMTD,BASS,BXSA,BCSB,BCCV,BFEE,BLEM,BCPM,BCSK,BTSK,BZEL,BCEL,BCEB,BCON,BPLA,BCOO,BRAI,BPIP,BPIQ,BRTC,BRMD,BRHC,BRCB,BRMY,BRGR,BROG,BRDT,BRSG,BRIG,BRWG,BRFE,BUPC,BGMT
        </Content>
        

        <Structure name="BTOG"  >
            <var name="Version" type="float"  />
            <var name="Rmin" type="float"  />
            <var name="Rmax" type="float"  />
            <var name="dz" type="float"  />
            <var name="choice" type="float"  />
            <var name="posit1(2)" type="float"  />
            <var name="posit2" type="float"  />
            <var name="posit3" type="float"  />
            <var name="posit4(5)" type="float"  />
        </Structure>        
        <Structure name="TRAY"  >
            <var name="Height" type="float"  />
            <var name="Width" type="float"  />
            <var name="Length" type="float"  />
            <var name="WallThk" type="float"  />
            <var name="SupFullH" type="float"  />
            <var name="SupFullW" type="float"  />
            <var name="SupLen" type="float"  />
            <var name="SupBaseT" type="float"  />
            <var name="SupBaseW" type="float"  />
            <var name="SupArmT" type="float"  />
            <var name="CoolOutR" type="float"  />
            <var name="CoolInnR" type="float"  />
            <var name="StripT" type="float"  />
            <var name="FootInse" type="float"  />
            <var name="FootThk" type="float"  />
            <var name="Foot1Len" type="float"  />
            <var name="Foot2Thk" type="float"  />
            <var name="Foot3Len" type="float"  />
        </Structure>        
        <Structure name="CTBB"  >
            <var name="Slab1Len" type="float"  />
            <var name="Slab2Len" type="float"  />
            <var name="Slab1x" type="float"  />
            <var name="Slab2x" type="float"  />
            <var name="SlabThck" type="float"  />
            <var name="SlabWid" type="float"  />
            <var name="ConvLen" type="float"  />
            <var name="ConvWidM" type="float"  />
            <var name="ConvThck" type="float"  />
            <var name="PmtLen" type="float"  />
            <var name="PmtMaxR" type="float"  />
            <var name="PmtMinR" type="float"  />
            <var name="BaseLen" type="float"  />
            <var name="BaseMaxR" type="float"  />
            <var name="BaseMinR" type="float"  />
            <var name="ElecThck" type="float"  />
            <var name="Wrap" type="float"  />
            <var name="Shim" type="float"  />
        </Structure>        
        <Structure name="TOFF"  >
            <var name="BoxWidth" type="float"  />
            <var name="SlatLen" type="float"  />
            <var name="Slat5Z" type="float"  />
            <var name="Slatz(10)" type="float"  />
            <var name="Slatx(10)" type="float"  />
            <var name="SlatAy(10)" type="float"  />
            <var name="SlatThck" type="float"  />
            <var name="SlatWid" type="float"  />
            <var name="SlatAng" type="float"  />
            <var name="PmtLen" type="float"  />
            <var name="PmtMaxR" type="float"  />
            <var name="PmtMinR" type="float"  />
            <var name="BaseLen" type="float"  />
            <var name="BaseMaxR" type="float"  />
            <var name="BaseMinR" type="float"  />
            <var name="SockLen" type="float"  />
            <var name="CellWid" type="float"  />
            <var name="CellHgt" type="float"  />
            <var name="ElecHgt" type="float"  />
            <var name="ElecThck" type="float"  />
            <var name="ElecWid" type="float"  />
            <var name="ElecLen" type="float"  />
            <var name="Elecz(10)" type="float"  />
            <var name="PlasPos" type="float"  />
            <var name="RailThck" type="float"  />
            <var name="RailWid" type="float"  />
            <var name="CoolInnR" type="float"  />
            <var name="CoolOutR" type="float"  />
            <var name="BconYLen" type="float"  />
            <var name="BconZLen" type="float"  />
            <var name="BconPLdx" type="float"  />
            <var name="BconPLdz" type="float"  />
            <var name="BLEMPosX" type="float"  />
            <var name="BLEMPosY(15)" type="float"  />
            <var name="BLEMPosZ1" type="float"  />
            <var name="BLEMPosZ2" type="float"  />
            <var name="BLEMLenX" type="float"  />
            <var name="BLEMLenY" type="float"  />
            <var name="BLEMLenZ" type="float"  />
            <var name="BPIPPosX" type="float"  />
            <var name="BPIPPosY" type="float"  />
            <var name="BPIPPosZ" type="float"  />
            <var name="BPIPRmin" type="float"  />
            <var name="BPIPRmax" type="float"  />
            <var name="BPIPLenZ" type="float"  />
        </Structure>        
        <Structure name="MODR"  >
            <var name="Height" type="float"  />
            <var name="Width" type="float"  />
            <var name="Length" type="float"  />
            <var name="Center" type="float"  />
            <var name="mrpcX(33)" type="float"  />
            <var name="mrpcZ(33)" type="float"  />
            <var name="mrpcA(33)" type="float"  />
            <var name="X0Offset" type="float"  />
            <var name="HCHgt" type="float"  />
            <var name="HCWid" type="float"  />
            <var name="HCLen" type="float"  />
            <var name="PCBHgt" type="float"  />
            <var name="PCBWid" type="float"  />
            <var name="PCBLen" type="float"  />
            <var name="MYHgt" type="float"  />
            <var name="MYWid" type="float"  />
            <var name="MYLen" type="float"  />
            <var name="GRHgt" type="float"  />
            <var name="GRWid" type="float"  />
            <var name="GRLen" type="float"  />
            <var name="OGHgt" type="float"  />
            <var name="OGWid" type="float"  />
            <var name="OGLen" type="float"  />
            <var name="IGHgt" type="float"  />
            <var name="IGWid" type="float"  />
            <var name="IGLen" type="float"  />
            <var name="SPRMin" type="float"  />
            <var name="SPRMax" type="float"  />
            <var name="SPLen" type="float"  />
            <var name="WGRMin" type="float"  />
            <var name="WGRMax" type="float"  />
            <var name="WGLen" type="float"  />
            <var name="FEEH" type="float"  />
            <var name="HBWid" type="float"  />
            <var name="NGap" type="float"  />
        </Structure>        
        <Structure name="MOD4"  >
            <var name="Height" type="float"  />
            <var name="Width" type="float"  />
            <var name="Length" type="float"  />
            <var name="Center" type="float"  />
            <var name="mrpcX(32)" type="float"  />
            <var name="mrpcZ(32)" type="float"  />
            <var name="mrpcA(32)" type="float"  />
            <var name="X0Offset" type="float"  />
            <var name="HCHgt" type="float"  />
            <var name="HCWid" type="float"  />
            <var name="HCLen" type="float"  />
            <var name="PCBHgt" type="float"  />
            <var name="PCBWid" type="float"  />
            <var name="PCBLen" type="float"  />
            <var name="MYHgt" type="float"  />
            <var name="MYWid" type="float"  />
            <var name="MYLen" type="float"  />
            <var name="GRHgt" type="float"  />
            <var name="GRWid" type="float"  />
            <var name="GRLen" type="float"  />
            <var name="OGHgt" type="float"  />
            <var name="OGWid" type="float"  />
            <var name="OGLen" type="float"  />
            <var name="IGHgt" type="float"  />
            <var name="IGWid" type="float"  />
            <var name="IGLen" type="float"  />
            <var name="SPRMin" type="float"  />
            <var name="SPRMax" type="float"  />
            <var name="SPLen" type="float"  />
            <var name="WGRMin" type="float"  />
            <var name="WGRMax" type="float"  />
            <var name="WGLen" type="float"  />
            <var name="FEEH" type="float"  />
            <var name="HBWid" type="float"  />
            <var name="NGap" type="float"  />
            <var name="TrayEdgeZ" type="float"  />
        </Structure>        
        <Structure name="MOD5"  >
            <var name="Height" type="float"  />
            <var name="Width" type="float"  />
            <var name="Length" type="float"  />
            <var name="Center" type="float"  />
            <var name="mrpcX(32)" type="float"  />
            <var name="mrpcZ(32)" type="float"  />
            <var name="mrpcA(32)" type="float"  />
            <var name="X0Offset" type="float"  />
            <var name="HCHgt" type="float"  />
            <var name="HCWid" type="float"  />
            <var name="HCLen" type="float"  />
            <var name="PCBHgt" type="float"  />
            <var name="PCBWid" type="float"  />
            <var name="PCBLen" type="float"  />
            <var name="MYHgt" type="float"  />
            <var name="MYWid" type="float"  />
            <var name="MYLen" type="float"  />
            <var name="GRHgt" type="float"  />
            <var name="GRWid" type="float"  />
            <var name="GRLen" type="float"  />
            <var name="OGHgt" type="float"  />
            <var name="OGWid" type="float"  />
            <var name="OGLen" type="float"  />
            <var name="IGHgt" type="float"  />
            <var name="IGWid" type="float"  />
            <var name="IGLen" type="float"  />
            <var name="SPRMin" type="float"  />
            <var name="SPRMax" type="float"  />
            <var name="SPLen" type="float"  />
            <var name="WGRMin" type="float"  />
            <var name="WGRMax" type="float"  />
            <var name="WGLen" type="float"  />
            <var name="FEEH" type="float"  />
            <var name="HBWid" type="float"  />
            <var name="NGap" type="float"  />
            <var name="TrayEdgeZ" type="float"  />
        </Structure>
        <Structure name="MOD7"  >
            <var name="Height" type="float"  />
            <var name="Width" type="float"  />
            <var name="Length" type="float"  />
            <var name="Center" type="float"  />
            <var name="mrpcX(32)" type="float"  />
            <var name="mrpcZ(32)" type="float"  />
            <var name="mrpcA(32)" type="float"  />
            <var name="X0Offset" type="float"  />
            <var name="HCHgt" type="float"  />
            <var name="HCWid" type="float"  />
            <var name="HCLen" type="float"  />
            <var name="PCBHgt" type="float"  />
            <var name="PCBWid" type="float"  />
            <var name="PCBLen" type="float"  />
            <var name="MYHgt" type="float"  />
            <var name="MYWid" type="float"  />
            <var name="MYLen" type="float"  />
            <var name="GRHgt" type="float"  />
            <var name="GRWid" type="float"  />
            <var name="GRLen" type="float"  />
            <var name="OGHgt" type="float"  />
            <var name="OGWid" type="float"  />
            <var name="OGLen" type="float"  />
            <var name="IGHgt" type="float"  />
            <var name="IGWid" type="float"  />
            <var name="IGLen" type="float"  />
            <var name="SPRMin" type="float"  />
            <var name="SPRMax" type="float"  />
            <var name="SPLen" type="float"  />
            <var name="WGRMin" type="float"  />
            <var name="WGRMax" type="float"  />
            <var name="WGLen" type="float"  />
            <var name="FEEH" type="float"  />
            <var name="HBWid" type="float"  />
            <var name="NGap" type="float"  />
            <var name="TrayEdgeZ" type="float"  />
        </Structure>
        
        <varlist type="REAL"  >
            support_arm_width,support_arm_Xpos,support_arm_Ypos,support_aile_width,support_aile_Ypos,xpos,ypos,zpos,totlen,sublen,subcen,x0,z0,Y,Z,DTHgt
        </varlist>        
        <varlist type="INTEGER"  >
            i,is,choice,tof,iwid,igap,islat, YEAR
        </varlist>
        
        <Fill name="BTOG" comment="Barrel Trigger, CTB/TOF Basic dimensions"  >
            <var name="Version" value="6" comment=" geometry version "  />
            <var name="Rmin" value="207.80" comment=" minimum CTB/TOF system radius (as built) "  />
            <var name="Rmax" value="219.5" comment=" maximum CTB/TOF system radius "  />
            <var name="dz" value="246.0" comment=" CTB/TOF tube half length "  />
            <var name="choice" value="11" comment=" 1=CTB, 2=Full-TOFp, 3=25% TOFp, 4=1 tray-TOFp, *                               ! 5=1 tray-TOFr, 6=Full-TOFr, 7=TOFp+TOFrp Run-IV"  />
            <var name="posit1" value="{32,33}" comment=" TOFp tray position (0) choice 4 or 5 -&gt; run-2,3 posn "  />
            <var name="posit2" value="23" comment=" TOFr tray position for choice 5 -&gt; run-4 posn "  />
            <var name="posit3" value="33" comment=" TOFr tray position for choice 8,9,10 -&gt; run-5,6,7 posn "  />
            <var name="posit4" value="{17,18,19,37,39}" comment=" TOFr8 tray positions for choice 11,12 -&gt; run 8 east and west trays "  />
        </Fill>        
        <Fill name="TRAY" comment="general tray stats"  >
            <var name="Height" value="8.89" comment=" tray height(8.89) "  />
            <var name="Width" value="21.59" comment=" full tray width "  />
            <var name="Length" value="241.62" comment=" full tray length(241.62) "  />
            <var name="WallThk" value="0.13" comment=" tray wall thickness "  />
            <var name="SupFullH" value="2.03" comment=" support height (radial) "  />
            <var name="SupFullW" value="15.24" comment=" support full width with arms "  />
            <var name="SupLen" value="215.9" comment=" support length "  />
            <var name="SupBaseW" value="9.22" comment=" support base width "  />
            <var name="SupBaseT" value="0.32" comment=" support base thickness   "  />
            <var name="SupArmT" value="0.64" comment=" support arm  thickness "  />
            <var name="CoolOutR" value="0.80" comment=" Cooling channel outer radius "  />
            <var name="CoolInnR" value="0.48" comment=" Cooling channel inner radius "  />
            <var name="StripT" value="0.08" comment=" Thickness of polyethylene strip on bottom "  />
            <var name="FootInse" value="1.06" comment=" foot inset from tray edge "  />
            <var name="FootThk" value="0.23" comment=" thickness of foot material "  />
            <var name="Foot1len" value="1.68" comment=" length (in section) of first part of foot "  />
            <var name="Foot2Thk" value="1.16" comment=" thickness of second foot section "  />
            <var name="Foot3Len" value="2.16" comment=" length of third part of foot "  />
        </Fill>        
        <Fill name="CTBB" comment="barrel trigger stats"  >
            <var name="Slab1Len" value="112.5" comment=" first slab (B) length "  />
            <var name="Slab2Len" value="130.0" comment=" second slab (A)length  "  />
            <var name="Slab1x" value="5.84" comment=" first slab (B) x position "  />
            <var name="Slab2x" value="2.67" comment=" second slab (A) x position "  />
            <var name="SlabThck" value="1.0" comment=" scintillator slab thicknesses "  />
            <var name="SlabWid" value="21.0" comment=" scintillator slab width "  />
            <var name="ConvLen" value="8.5" comment=" optical converter length "  />
            <var name="ConvWidM" value="4.0" comment=" optical convertor min width "  />
            <var name="ConvThck" value="0.92" comment=" optical convertor thickness "  />
            <var name="PmtLen" value="5.0" comment=" PMT length "  />
            <var name="PmtMaxR" value="2.0" comment=" PMT max radius "  />
            <var name="PmtMinR" value="1.84" comment=" PMT min radius "  />
            <var name="BaseLen" value="4.0" comment=" Base length "  />
            <var name="BaseMaxR" value="2.13" comment=" Base max radius "  />
            <var name="baseMinR" value="1.0" comment=" Base min radius "  />
            <var name="ElecThck" value="0.25" comment=" readout electronics thickness "  />
            <var name="Wrap" value="0.13" comment=" thickness of Tyvek + black plastic "  />
            <var name="Shim" value="0.26" comment=" thickness of shim to position slat 2 "  />
        </Fill>        
        <Fill name="TOFF" comment="time of flight stats"  >
            <var name="BoxWidth" value="21.0875" comment=" width of the 5w box (BMTD) "  />
            <var name="SlatLen" value="20.0" comment=" slat length "  />
            <var name="Slat5Z" value="15.5" comment=" 5_wide mother box z length/2. "  />
            <var name="Slatz" value="{104.938,84.060,62.860,41.254,18.966,-3.954,-27.528,-51.254,-75.634,-100.683 }" comment=" (5)4_wide_slat Z position for 10 rows "  />
            <var name="Slatx" value="{-1.7,-0.4,-0.2,-0.2,-0.2,-0.2,-0.2,-0.2,-0.2,-0.2 }" comment=" Slat assembly X pos "  />
            <var name="SlatAy" value="{5.0,10.0,11.0,11.0,11.0,11.0,11.0,11.0,11.0,11.0 }" comment=" Slat assembly alphay "  />
            <var name="SlatThck" value="2.0" comment=" scintillator slab thicknesses "  />
            <var name="SlatWid" value="3.81" comment=" scintillator slab width (4.0) "  />
            <var name="SlatAng" value="11.5" comment=" slat assy. angle w.r.t. tray "  />
            <var name="PmtLen" value="5.0" comment=" PMT length "  />
            <var name="PmtMaxR" value="1.91" comment=" PMT max radius "  />
            <var name="PmtMinR" value="1.8" comment=" PMT min radius "  />
            <var name="SockLen" value="1.0" comment=" thickness of socket "  />
            <var name="BaseLen" value="5.0" comment=" Base length "  />
            <var name="BaseMaxR" value="1.91" comment=" Base max radius "  />
            <var name="baseMinR" value="1.8" comment=" Base min radius   "  />
            <var name="CellWid" value="3.1" comment=" Cell width  "  />
            <var name="CellHgt" value="1.6" comment=" Cell height "  />
            <var name="ElecHgt" value="3.0" comment=" FEE Board height in tray... (rails/loop too). "  />
            <var name="ElecThck" value="0.17" comment=" FEE Board thickness (67 mils) "  />
            <var name="ElecWid" value="20.3" comment=" FEE Board width (was 21) "  />
            <var name="ElecLen" value="5.715" comment=" FEE Board length (was 16) "  />
            <var name="Elecz" value="{105.610,84.573,63.224,41.667,19.379,-3.542,-27.165,-50.841,-75.170,-100.270}" comment=" FEE Z position for 10 rows "  />
            <var name="PlasPos" value="3.0" comment=" Plastic angles (BPLA) Z center offset "  />
            <var name="RailThck" value="0.2" comment=" Cooling loop rail thickness "  />
            <var name="RailWid" value="1.5" comment=" Cooling loop rail width "  />
            <var name="CoolOutR" value="0.635" comment=" Cooling loop pipe outer radius, 0.5in/2 "  />
            <var name="CoolInnR" value="0.561" comment=" Cooling loop pipe inner radius, (0.5in-0.058in)/2 "  />
            <var name="BconYLen" value="2.50" comment=" BCON Y length for TOFp Slat assembly "  />
            <var name="BconZLen" value="1.20" comment=" BCON Z length for TOFp Slat assembly "  />
            <var name="BconPLdx" value="0.203" comment=" BCON dx for BPLA = 0.08*2.54  "  />
            <var name="BconPLdz" value="0.635" comment=" BCON dz for BPLA = 0.25*2.54 "  />
            <var name="BLEMPosX" value="0.52" comment=" BLEM position X in BFEE = ElecThck + 0.7/2.0 "  />
            <var name="BLEMPosY" value="{-7.0,-3.5,0.0,3.5,7.0,-7.0,-3.5,0.0,3.5,7.0,-6.0,-2.5,1.0,4.5,8.0 }" comment=" BLEM position Y in BFEE "  />
            <var name="BLEMPosZ1" value="2.0" comment=" BLEM position Z1 in BFEE "  />
            <var name="BLEMPosZ2" value="-2.0" comment=" BLEM position Z2 in BFEE "  />
            <var name="BLEMLenX" value="0.86" comment=" BLEM X length "  />
            <var name="BLEMLenY" value="0.68" comment=" BLEM Y length "  />
            <var name="BLEMLenZ" value="3.80" comment=" BLEM Z length "  />
            <var name="BPIPPosX" value="0.09" comment=" BPIP position X in BLEM "  />
            <var name="BPIPPosY" value="0.00" comment=" BPIP position Y in BLEM "  />
            <var name="BPIPPosZ" value="0.90" comment=" BPIP posision Z in BLEM "  />
            <var name="BPIPRmin" value="0.31" comment=" BPIP Rmin "  />
            <var name="BPIPRmax" value="0.34" comment=" BPIP Rmax "  />
            <var name="BPIPLenZ" value="2.00" comment=" BPIP Z length "  />
        </Fill>        
        <Fill name="MODR" comment="RUN3 MRPC TOF Module dimensions and positions"  >
            <var name="Height" value="1.95" comment=" Module height (r) "  />
            <var name="Width" value="21.2" comment=" Module width (phi) "  />
            <var name="Length" value="9.4" comment=" Module length (z) "  />
            <var name="Center" value="0.35" comment=" Module detector center in (phi) "  />
            <var name="mrpcX" value="{4.76,1.21,4.99,1.46,5.19,1.71,4.98,1.54,2.69,3.39,3.25,3.49,3.33,3.54,3.54,3.57,3.48,3.51,3.19,3.19,3.19,3.19,3.19,3.43,3.43,3.43,3.43,3.43,3.43,3.43,3.43,3.43,3.43 }" comment=" mrpc Xpositions "  />
            <var name="mrpcZ" value="{4.50,10.48,16.83,22.64,29.25,34.89,41.68,47.19,53.76,60.18,66.53,72.95,79.42,85.97,92.59,99.28,106.00,112.84,119.60,126.66,133.80,141.06,148.43,156.09,163.71,171.46,179.35,187.38,195.56,203.84,212.33,220.94,229.7 }" comment=" mrpc Zpositions "  />
            <var name="mrpcA" value="{1.20,2.84,4.48,6.12,7.74,9.36,10.97,7.60,14.30,22.30,22.30,22.30,22.30,22.30,22.30,22.30,22.30,22.30,33.00,33.00,33.00,33.00,33.00,37.58,37.58,37.58,37.58,37.58,37.58,37.58,37.58,37.58,37.58 }" comment=" mrpc angles "  />
            <var name="X0Offset" value="-3.66" comment=" Tray inner surface to the center   "  />
            <var name="HCHgt" value="0.466" comment=" HC-&gt;Height (r) "  />
            <var name="HCWid" value="20.8" comment="  HC-&gt;Width (phi) "  />
            <var name="HCLen" value="8.4" comment="   HC-&gt;Length (z) "  />
            <var name="PCBHgt" value="0.15" comment=" PCB-&gt;Height (r) "  />
            <var name="PCBWid" value="21.0" comment="  PCB-&gt;Width  (phi) "  />
            <var name="PCBLen" value="9.4" comment="   PCB-&gt;Length (z) *PCBLen =  9.4(real) "  />
            <var name="MYHgt" value="0.035" comment=" MYlar-&gt;Height "  />
            <var name="MYWid" value="21.2" comment="  MYlar-&gt;Width "  />
            <var name="MYLen" value="8.4" comment="   MYlar-&gt;Length "  />
            <var name="GRHgt" value="0.013" comment=" GRaphite-&gt;Height "  />
            <var name="GRWid" value="20.2" comment="  GRaphite-&gt;Width "  />
            <var name="GRLen" value="7.4" comment="   GRaphite-&gt;Length "  />
            <var name="OGHgt" value="0.11" comment=" Outer Glass-&gt;Height "  />
            <var name="OGWid" value="20.6" comment="  Outer Glass-&gt;Width "  />
            <var name="OGLen" value="7.8" comment="   Outer Glass-&gt;Length "  />
            <var name="IGHgt" value="0.054" comment=" Inner Glass-&gt;Height "  />
            <var name="IGWid" value="20.0" comment="  Inner Glass-&gt;Width "  />
            <var name="IGLen" value="6.1" comment="   Inner Glass-&gt;Length "  />
            <var name="SPRMin" value="0." comment=" SeParator Tube-&gt;RMin "  />
            <var name="SPRMax" value="0.011" comment="  SeParator Tube-&gt;RMax "  />
            <var name="SPLen" value="7.8" comment="   SeParator Tube-&gt;Length "  />
            <var name="WGRMin" value="0." comment=" Wedge Tube: RMin "  />
            <var name="WGRMax" value="0.15" comment="  Wedge Tube-&gt;RMax "  />
            <var name="WGLen" value="10.0" comment="   Wedge Tube-&gt;Length "  />
            <var name="FEEH" value="0.15" comment=" tofr fee pcb thickness "  />
            <var name="HBWid" value="0.635" comment=" the slim honeycomb support box width "  />
            <var name="NGap" value="6" comment=" Number of gaps in MRPC "  />
        </Fill>        
        <Fill name="MOD4" comment="RUN4 MRPC TOF Module dimensions and positions"  >
            <var name="Height" value="1.95" comment=" Module height (r) "  />
            <var name="Width" value="21.2" comment=" Module width (phi) "  />
            <var name="Length" value="9.4" comment=" Module length (z) "  />
            <var name="Center" value="0.35" comment=" Module detector center (phi) "  />
            <var name="mrpcZ" value="{5.83,11.97,18.17,24.03,30.55,36.22,42.54,48.87,55.19,61.53,67.86,74.24,80.68,87.08,93.64,100.36,107.19,114.05,121.02,128.08,135.24,142.51,149.88,157.35,164.93,172.63,180.43,188.35,196.38,204.52,212.79,221.17 }" comment=" mrpc Zposns "  />
            <var name="mrpcX" value="{1.5,2.83,4.16,1.55,4.73,1.88,2.56,3.06,3.3,3.41,3.32,3.2,3.07,2.73,2.58,2.64,2.74,2.74,2.76,2.76,2.76,2.76,2.76,2.76,2.76,2.76,2.76,2.76,2.76,2.76,2.76,2.76 }" comment=" mrpc Xposns "  />
            <var name="mrpcA" value="{6.,6.,6.,6.,0.,12.,12.,16.,16.,19.,19.,19.,19.,24.,24.,25.,27.,29.,30.,30.,30.,30.,30.,30.,30.,30.,30.,30.,30.,30.,30.,30. }" comment=" mrpc angles "  />
            <var name="X0Offset" value="-3.66" comment=" Tray inner surface to the center   "  />
            <var name="HCHgt" value="0.466" comment=" HC-&gt;Height (r) "  />
            <var name="HCWid" value="20.8" comment="  HC-&gt;Width (phi) "  />
            <var name="HCLen" value="8.4" comment="   HC-&gt;Length (z) "  />
            <var name="PCBHgt" value="0.15" comment=" PCB-&gt;Height (r) "  />
            <var name="PCBWid" value="21.0" comment="  PCB-&gt;Width  (phi) "  />
            <var name="PCBLen" value="9.4" comment="   PCB-&gt;Length (z) *PCBLen =  9.4(real) "  />
            <var name="MYHgt" value="0.035" comment=" MYlar-&gt;Height "  />
            <var name="MYWid" value="21.2" comment="  MYlar-&gt;Width "  />
            <var name="MYLen" value="8.4" comment="   MYlar-&gt;Length "  />
            <var name="GRHgt" value="0.013" comment=" GRaphite-&gt;Height "  />
            <var name="GRWid" value="20.2" comment="  GRaphite-&gt;Width "  />
            <var name="GRLen" value="7.4" comment="   GRaphite-&gt;Length "  />
            <var name="OGHgt" value="0.11" comment=" Outer Glass-&gt;Height "  />
            <var name="OGWid" value="20.6" comment="  Outer Glass-&gt;Width "  />
            <var name="OGLen" value="7.8" comment="   Outer Glass-&gt;Length "  />
            <var name="IGHgt" value="0.054" comment=" Inner Glass-&gt;Height "  />
            <var name="IGWid" value="20.0" comment="  Inner Glass-&gt;Width "  />
            <var name="IGLen" value="6.1" comment="   Inner Glass-&gt;Length "  />
            <var name="SPRMin" value="0." comment=" SeParator Tube-&gt;RMin "  />
            <var name="SPRMax" value="0.011" comment="  SeParator Tube-&gt;RMax "  />
            <var name="SPLen" value="7.8" comment="   SeParator Tube-&gt;Length "  />
            <var name="WGRMin" value="0." comment=" Wedge Tube: RMin "  />
            <var name="WGRMax" value="0.15" comment="  Wedge Tube-&gt;RMax "  />
            <var name="WGLen" value="10.0" comment="   Wedge Tube-&gt;Length "  />
            <var name="FEEH" value="0.15" comment=" tofr fee pcb thickness "  />
            <var name="HBWid" value="0.635" comment=" the slim honeycomb support box width "  />
            <var name="NGap" value="6" comment=" Number of gaps in MRPC "  />
            <var name="TrayEdgeZ" value="(3.0*2.54)+1.0" comment=" tray posn along rail wrt TPC centerplane (Z) "  />
        </Fill>        
        <Fill name="MOD5" comment="RUN5 MRPC TOF Module dimensions and positions"  >
            <var name="Height" value="1.95" comment=" Module height (r) "  />
            <var name="Width" value="21.2" comment=" Module width (phi) "  />
            <var name="Length" value="9.4" comment=" Module length (z) "  />
            <var name="Center" value="0.35" comment=" Module detector center (phi) "  />
            <var name="mrpcZ" value="{7.08,13.23,19.23,25.48,33.27,39.48,45.67,51.51,59.66,65.98,71.73,78.09,86.36,92.02,98.7,104.28,112.45,118.79,125.14,131.51,139.6,145.96,152.32,158.68,167.41,173.78,180.18,186.6,195.53,202.01,208.52,215.06 }" comment=" mrpc Zposns "  />
            <var name="mrpcX" value="{1.61,4.44,1.61,5.49,2.0,3.54,5.02,2.01,3.36,5.02,2.0,3.56,5.02,2.0,5.02,2.0,2.63,3.09,3.6,4.11,3.83,4.06,4.21,4.34,3.85,3.85,3.85,3.85,3.72,3.72,3.72,3.72}" comment=" mrpc Xposns "  />
            <var name="mrpcA" value="{0.,0.,0.,0.,6.,6.,6.,6.,6.,6.,6.,6.,6.,6.,6.,6.,16.,16.,16.,16.,19.,19.,19.,19.,22.,22.,22.,22.,24.,24.,24.,24. }" comment=" mrpc angles "  />
            <var name="X0Offset" value="-3.90" comment=" Tray inner surface to the center - new value from Jing "  />
            <var name="HCHgt" value="0.466" comment=" HC-&gt;Height (r) "  />
            <var name="HCWid" value="20.8" comment="  HC-&gt;Width (phi) "  />
            <var name="HCLen" value="8.4" comment="   HC-&gt;Length (z) "  />
            <var name="PCBHgt" value="0.15" comment=" PCB-&gt;Height (r) "  />
            <var name="PCBWid" value="21.0" comment="  PCB-&gt;Width  (phi) "  />
            <var name="PCBLen" value="9.4" comment="   PCB-&gt;Length (z) *PCBLen =  9.4(real) "  />
            <var name="MYHgt" value="0.035" comment=" MYlar-&gt;Height "  />
            <var name="MYWid" value="21.2" comment="  MYlar-&gt;Width "  />
            <var name="MYLen" value="8.4" comment="   MYlar-&gt;Length "  />
            <var name="GRHgt" value="0.013" comment=" GRaphite-&gt;Height "  />
            <var name="GRWid" value="20.2" comment="  GRaphite-&gt;Width "  />
            <var name="GRLen" value="7.4" comment="   GRaphite-&gt;Length "  />
            <var name="OGHgt" value="0.11" comment=" Outer Glass-&gt;Height "  />
            <var name="OGWid" value="20.6" comment="  Outer Glass-&gt;Width "  />
            <var name="OGLen" value="7.8" comment="   Outer Glass-&gt;Length "  />
            <var name="IGHgt" value="0.054" comment=" Inner Glass-&gt;Height "  />
            <var name="IGWid" value="20.0" comment="  Inner Glass-&gt;Width "  />
            <var name="IGLen" value="6.1" comment="   Inner Glass-&gt;Length "  />
            <var name="SPRMin" value="0." comment=" SeParator Tube-&gt;RMin "  />
            <var name="SPRMax" value="0.011" comment="  SeParator Tube-&gt;RMax "  />
            <var name="SPLen" value="7.8" comment="   SeParator Tube-&gt;Length "  />
            <var name="WGRMin" value="0." comment=" Wedge Tube: RMin "  />
            <var name="WGRMax" value="0.15" comment="  Wedge Tube-&gt;RMax "  />
            <var name="WGLen" value="10.0" comment="   Wedge Tube-&gt;Length "  />
            <var name="FEEH" value="0.15" comment=" tofr fee pcb thickness "  />
            <var name="HBWid" value="0.635" comment=" the slim honeycomb support box width "  />
            <var name="NGap" value="6" comment=" Number of gaps in MRPC "  />
            <var name="TrayEdgeZ" value="13.25" comment="tray posn along rail wrt TPC centerplane (Z).Liuj puts this new value  "  />
        </Fill>       
        <Fill name="MOD7" comment="RUN7 MRPC TOF Module dimensions and positions"  >
            <var name="Height" value="1.95" comment=" Module height (r) "  />
            <var name="Width" value="21.2" comment=" Module width (phi) "  />
            <var name="Length" value="9.4" comment=" Module length (z) "  />
            <var name="Center" value="0.35" comment=" Module detector center (phi) "  />
            <var name="mrpcZ" value="{5.43,11.42,17.71,23.56,29.96,35.66,42.71,49.04,55.35,61.65,67.99,74.42,80.91,87.44,93.93,100.53,107.30,114.17,121.22,128.29,135.52,142.80,150.19,157.72,165.34,173.07,180.92,188.93,197.02,205.24,213.61,222.08 }" comment=" mrpc Zposns "  />
            <var name="mrpcX" value="{3.94,1.48,3.94,1.48,3.94,1.48,3.01,3.54,3.79,3.86,3.84,3.89,3.89,3.84,3.51,3.29,3.29,3.29,3.50,3.50,3.60,3.60,3.60,3.60,3.60,3.60,3.60,3.60,3.60,3.60,3.60,3.60}" comment=" mrpc Xposns "  />
            <var name="mrpcA" value="{0.,0.,0.,0.,0.,0.,16.,16.,20.,22.,22.,22.,22.,22.,26.,26.,26.,26.,30.,30.,32.,32.,32.,32.,32.,32.,32.,32.,32.,32.,32.,32.}" comment=" mrpc angles "  />
            <var name="X0Offset" value="-4.32" comment=" Tray inner surface to the center -tray_Height/2+tray_WallThk "  />
            <var name="HCHgt" value="0.466" comment=" HC-&gt;Height (r) "  />
            <var name="HCWid" value="20.8" comment="  HC-&gt;Width (phi) "  />
            <var name="HCLen" value="8.4" comment="   HC-&gt;Length (z) "  />
            <var name="PCBHgt" value="0.15" comment=" PCB-&gt;Height (r) "  />
            <var name="PCBWid" value="21.0" comment="  PCB-&gt;Width  (phi) "  />
            <var name="PCBLen" value="9.4" comment="   PCB-&gt;Length (z) *PCBLen =  9.4(real) "  />
            <var name="MYHgt" value="0.035" comment=" MYlar-&gt;Height "  />
            <var name="MYWid" value="21.2" comment="  MYlar-&gt;Width "  />
            <var name="MYLen" value="8.4" comment="   MYlar-&gt;Length "  />
            <var name="GRHgt" value="0.013" comment=" GRaphite-&gt;Height "  />
            <var name="GRWid" value="20.2" comment="  GRaphite-&gt;Width "  />
            <var name="GRLen" value="7.4" comment="   GRaphite-&gt;Length "  />
            <var name="OGHgt" value="0.11" comment=" Outer Glass-&gt;Height "  />
            <var name="OGWid" value="20.6" comment="  Outer Glass-&gt;Width "  />
            <var name="OGLen" value="7.8" comment="   Outer Glass-&gt;Length "  />
            <var name="IGHgt" value="0.054" comment=" Inner Glass-&gt;Height "  />
            <var name="IGWid" value="20.0" comment="  Inner Glass-&gt;Width "  />
            <var name="IGLen" value="6.1" comment="   Inner Glass-&gt;Length "  />
            <var name="SPRMin" value="0." comment=" SeParator Tube-&gt;RMin "  />
            <var name="SPRMax" value="0.011" comment="  SeParator Tube-&gt;RMax "  />
            <var name="SPLen" value="7.8" comment="   SeParator Tube-&gt;Length "  />
            <var name="WGRMin" value="0." comment=" Wedge Tube: RMin "  />
            <var name="WGRMax" value="0.15" comment="  Wedge Tube-&gt;RMax "  />
            <var name="WGLen" value="10.0" comment="   Wedge Tube-&gt;Length "  />
            <var name="FEEH" value="0.15" comment=" tofr fee pcb thickness "  />
            <var name="HBWid" value="0.635" comment=" the slim honeycomb support box width "  />
            <var name="NGap" value="6" comment=" Number of gaps in MRPC "  />
            <var name="TrayEdgeZ" value="0.50" comment="tray posn along rail wrt TPC centerplane "  />
        </Fill>
        

        <Use struct="BTOG"  />
        <Use struct="TRAY"  />
        <Use struct="CTBB"  />
        <Use struct="TOFF"  />
        <Use struct="MODR"  />
        <Use struct="MOD4"  />
        <Use struct="MOD5"  />
        <Use struct="MOD7"  />


        <Mixture name="G10" dens="1.7"  >
            <Component name="Si" a="28.08" z="14" w="0.6*1*28./60."  />
            <Component name="O" a="16" z="8" w="0.6*2*16./60. + 0.4*4*16./174."  />
            <Component name="C" a="12" z="6" w="0.4*8*12./174."  />
            <Component name="H" a="1"  z="1" w="0.4*14*1./174."  />
        </Mixture>

        
        <Mixture name="RPCgas" dens="4.55E-3"  >
            <Component name="H" a="1" z="1" w="0.90*2*1./102.+0.+0.05*10*1./58."  />
            <Component name="C" a="12" z="6" w="0.90*2*12./102.+0.+0.05*4*12./58."  />
            <Component name="F" a="19" z="9" w="0.90*4*19./102.+0.05*6*19./146.+0."  />
            <Component name="S" a="32" z="16" w="0.+0.05*1*32./146.+0."  />
        </Mixture>
        
        <Mixture name="HoneyComb" dens="0.282"  >
            <Component name="Al" a="27" z="13" w="0.0105"  />
            <Component name="N" a="14" z="7" w="0.7395"  />
            <Component name="Adhesive" a="9" z="4.5" w="0.2500"  />
        </Mixture>
        
        <Create block="BTOF"  />
        <Placement block="BTOF" in="Cave"  >
        </Placement>
        
        <Block name="BTOF" comment="is the whole CTF system envelope"  >
            <Attribute for="BTOF" seen="1" colo="1"  />
            <Material name="Air"  />
            <Medium name="Standard"  />
            <Shape type="Tube" rmax="btog_Rmax" rmin="btog_Rmin" dz="btog_dz"  />

            <Print level="0" fmt="'BTOF: btog_choice = ', F4.1, ' itof = ', I2"  >
                btog_choice,5
            </Print>

            YEAR = btog_choice - 3            
            <Print level="0" fmt="' : this is the run ',I2,' geometry ...'"  >
                 YEAR
            </Print>
            
            choice = 1                                     ! ctb 
            <If expr="(btog_choice==2)"  >
                choice=btog_choice       ! full tofp 
            </If>
            
            <If expr="(btog_choice==6)"  >
                choice=btog_choice       ! full tofr 
            </If>
            
            <If expr="(btog_choice==11)"  >
                choice=btog_choice+1    ! Run VIII, 2 trays in west 
            </If>
            
            <Create block="BTOH"  />
            <Placement z="+btog_dz/2" block="BTOH"  >
                <Rotation alphay="180"  />
            </Placement>
            
            choice=btog_choice                    
            <Create block="BTOH"  />
            <Placement z="-btog_dz/2" block="BTOH"  >
            </Placement>
            
        </Block>
        
        <Block name="BTOH" comment="is a half of trigger system (west-east)"  >
            <Attribute for="BTOH" seen="0" serial="choice" colo="1"  />
            <Shape type="Tube" dz="btog_dz/2"  />

            <Do var="is" from="1" to="60"  >
                tof=0                                          !// all CTB for choice=1                      
                <If expr="(choice==2)"  >
                    tof=1      !// all TOFp 
                </If>
                
                <If expr="(choice==3&amp;46&lt;=is&amp;is&lt;=60)"  >
                    tof=1      !// big TOFp patch, rest CTB 
                </If>
                
                <If expr="(choice==4&amp;is==btog_posit1(1))"  >
                    tof=1      !// Run-2 (one TOFp tray) 
                </If>
                
                <If expr="(choice==5&amp;is==btog_posit1(1))"  >
                    tof=1      !// Run-3 (one TOFp tray 
                </If>
                
                <If expr="(choice==5&amp;is==btog_posit2)"  >
                    tof=2      !      and one TOFr tray) 
                </If>
                
                <If expr="(choice==6)"  >
                    tof=2      !// all TOFr 
                </If>
                
                <If expr="(choice==7&amp;is==btog_posit1(2))"  >
                    tof=1      !// Run-4 (one TOFp tray moved 1 slot 
                </If>
                
                <If expr="(choice==7&amp;is==btog_posit2)"  >
                    tof=3      !      and one TOFrp tray) 
                </If>
                
                <If expr="(choice==8&amp;is==btog_posit3)"  >
                    tof=4  !// Run-5 (one TOFr5 tray) 
                </If>
                
                <If expr="(choice==9&amp;is==btog_posit3)"  >
                    tof=5  !// Run-6 (one TOFr6 tray) 
                </If>
                
                <If expr="(choice==10&amp;is==btog_posit3)"  >
                    tof=6  !// Run-7 (one TOFr7 tray) 
                </If>
                

                <If expr="(choice==11&amp;is==btog_posit4(1))"  >
                    tof=7 !// Run-8 (5 TOFr8 trays) 
                </If>
                
                <If expr="(choice==11&amp;is==btog_posit4(2))"  >
                    tof=7 !// Run-8 (5 TOFr8 trays) 
                </If>
                
                <If expr="(choice==11&amp;is==btog_posit4(3))"  >
                    tof=7 !// Run-8 (5 TOFr8 trays) 
                </If>
                
                <If expr="(choice==12&amp;is==btog_posit4(4))"  >
                    tof=7 !// Run-8 (5 TOFr8 trays) 
                </If>
                
                <If expr="(choice==12&amp;is==btog_posit4(5))"  >
                    tof=7 !// Run-8 (5 TOFr8 trays) 
                </If>
                

                <Create block="BSEC"  />
                <Placement block="BSEC"  >
                    <Rotation alphaz="102+6*is"  />
                </Placement>
                
            </Do>
            
        </Block>
        
        <Block name="BSEC" comment="is a sector of CTB/TOF Trigger Barrel Scintillators"  >
            <Attribute for="BSEC" seen="0" serial="tof" colo="1"  />
            <Shape type="Tubs" phi2="3.0" phi1="-3.0"  />
            <Create block="BTRA"  />
            <Placement x="btog_Rmin+(tray_SupFullH+tray_height+tray_StripT)/2" block="BTRA"  >
            </Placement>
            
            <If expr="tof==2"  >
                <Create block="BRFE"  />
                <Placement x="btog_Rmin+tray_SupFullH+tray_StripT+tray_height+modr_feeh/2" z="(btog_dz-tray_length)/2" block="BRFE"  >
                </Placement>
                
            </If>
            
        </Block>
        
        <Block name="BTRA" comment="is one full tray plus supporting structure for CTB/TOF"  >
            <Attribute for="BTRA" seen="1" colo="2"  />
            <Shape type="BOX" dx="(tray_SupFullH+tray_height+tray_StripT)/2" dy="tray_Width/2"  />
            <Create block="BXTR"  />
            <Placement x="(tray_SupFullH+tray_StripT)/2" z="(btog_dz-tray_length)/2" block="BXTR"  >
            </Placement>
            
            <Create block="BUND"  />
            <Placement x="-(tray_height+tray_StripT)/2" z="(btog_dz-tray_SupLen)/2" block="BUND"  >
            </Placement>
            
        </Block>
        
        <Block name="BRFE" comment="is the FEE of tofr (run-3)"  >
            <Attribute for="BRFE" seen="0" colo="3"  />
            <Material name="G10"  />
            <Shape type="BOX" dz="tray_Length/2" dx="modr_feeh/2" dy="tray_Width/2"  />
        </Block>
        
        <Block name="BXTR" comment="is a Main TRay covering box for CTB or TOF"  >
            <Attribute for="BXTR" seen="0" colo="2"  />
            <Material name="Aluminium"  />

            <Shape type="BOX" dz="tray_length/2" dx="tray_height/2"  />
            <If expr="tof==1"  >
                <Create block="BTTC"  />
                <Placement block="BTTC"  >
                </Placement>
                
                <Elif expr="tof&gt;=2"  >
                    <Create block="BRTC"  />
                    <Placement block="BRTC"  >
                    </Placement>
                    
                    <Create block="BUPC"  />
                    <Placement x="(tray_Height-tray_WallThk)/2" block="BUPC"  >
                    </Placement>
                    
                </Elif>
                
                <Else  >
                    <Create block="BMTC"  />
                    <Placement block="BMTC"  >
                    </Placement>
                    
                </Else>
                
            </If>
            
        </Block>
        
        <Block name="BMTC" comment="is the Main Tray Cavity filled with the details for CTB"  >
            <Attribute for="BMTC" seen="-1" colo="5"  />
            <Material name="Air"  />
            <Shape type="BOX" dz="tray_Length/2-tray_WallThk" dx="tray_height/2-tray_WallThk" dy="tray_Width/2-tray_WallThk"  />
            zpos  =  (tray_length-ctbb_Slab1Len)/2-tray_WallThk-ctbb_Wrap 
            xpos  =  -tray_Height/2+ctbb_Slab1x 
            <Create block="BXSA"  />
            <Placement dz="ctbb_Slab1Len/2" dx="ctbb_SlabThck/2" dy="ctbb_SlabWid/2" x="xpos" z="zpos" block="BXSA"  >
            </Placement>
            
            zpos = zpos - (ctbb_Slab1Len + ctbb_ConvLen)/2 
            <Create block="BCCV"  />
            <Placement dx2="ctbb_SlabThck/2" dy2="ctbb_SlabWid/2" dy1="ctbb_ConvWidM/2" dz="ctbb_ConvLen/2" dx1="ctbb_SlabThck/2" x="xpos" z="zpos" block="BCCV"  >
            </Placement>
            
            zpos = zpos - (ctbb_ConvLen + ctbb_PmtLen)/2 
            <Create block="BCPM"  />
            <Placement rmin="ctbb_PmtMinR" rmax="ctbb_PmtMaxR" dz="ctbb_PmtLen/2" x="xpos" z="zpos" block="BCPM"  >
            </Placement>
            
            zpos = zpos - (ctbb_PmtLen + ctbb_BaseLen)/2 
            <Create block="BCSK"  />
            <Placement rmin="ctbb_BaseMinR" rmax="ctbb_BaseMaxR" dz="ctbb_BaseLen/2" x="xpos" z="zpos" block="BCSK"  >
            </Placement>
            
            <Create block="BZEL"  />
            <Placement dz="ctbb_BaseLen/2" dx="ctbb_ElecThck/2" dy="ctbb_BaseMinR-0.1" x="xpos" z="zpos" block="BZEL"  >
            </Placement>
            
            zpos  =  (tray_length-ctbb_Slab2Len)/2-tray_WallThk-ctbb_Wrap-ctbb_Shim 
            xpos  =  -tray_Height/2+ctbb_Slab2x 
            <Create block="BXSA"  />
            <Placement dz="ctbb_Slab2Len/2" dx="ctbb_SlabThck/2" dy="ctbb_SlabWid/2" x="xpos" z="-zpos" block="BXSA"  >
            </Placement>
            
            zpos = zpos - (ctbb_Slab2len + ctbb_ConvLen)/2 
            <Placement dx2="ctbb_SlabThck/2" dy2="ctbb_SlabWid/2" dy1="ctbb_ConvWidM/2" dz="ctbb_ConvLen/2" dx1="ctbb_SlabThck/2" x="xpos" z="-zpos" block="BCCV"  >
                <Rotation alphax="180"  />
            </Placement>
            
            zpos = zpos - (ctbb_ConvLen + ctbb_PmtLen)/2 
            <Placement rmin="ctbb_PmtMinR" rmax="ctbb_PmtMaxR" dz="ctbb_PmtLen/2" x="xpos" z="-zpos" block="BCPM"  >
            </Placement>
            
            zpos = zpos - (ctbb_PmtLen + ctbb_BaseLen)/2 
            <Placement rmin="ctbb_BaseMinR" rmax="ctbb_BaseMaxR" dz="ctbb_BaseLen/2" x="xpos" z="-zpos" block="BCSK"  >
            </Placement>
            
            <Placement dz="ctbb_BaseLen/2" dx="ctbb_ElecThck/2" dy="ctbb_BaseMinR-0.1" x="xpos" z="-zpos" block="BZEL"  >
            </Placement>
            

        </Block>
        
        <Block name="BTTC" comment="is the Main Tray Cavity filled with the details for TOFp"  >
            <Attribute for="BTTC" seen="0" colo="3"  />
            <Mixture name="LastAFoam" dens="0.048"  >
                <Component name="C" a="12" z="6" w="1"  />
                <Component name="H2" a="1" z="1" w="2"  />
            </Mixture>
            
            <Shape type="BOX" dz="tray_Length/2-tray_WallThk" dx="tray_height/2-tray_WallThk" dy="tray_Width/2-tray_WallThk"  />
            sublen             = ((toff_Slatz(2)+toff_Slat5Z)-(toff_Slatz(10)-toff_Slat5Z)) 
            subcen             = (toff_Slatz(2)+toff_Slat5Z)-sublen/2. 

            iwid=4 
            <Create block="BMAA"  />
            <Placement x="0" z="subcen" konly="'MANY'" block="BMAA"  >
            </Placement>
            
            iwid=5 
            <Create block="BMAA"  />
            <Placement x="0.0" z="toff_Slatz(1)" konly="'MANY'" block="BMAA"  >
            </Placement>
            

            <Create block="BCOO"  />
            <Placement dz="0" dx="0" dy="0" y="0" x="0" block="BCOO"  >
            </Placement>
            
            <Create block="BFEE" dz="toff_ElecLen/2" dx="toff_ElecThck/2" dy="toff_ElecWid/2"  />
            <Placement x="toff_ElecHgt" z="toff_Elecz(1)-toff_ElecLen/2" block="BFEE"  >
            </Placement>
            
            <Placement x="toff_ElecHgt" z="toff_Elecz(2)-toff_ElecLen/2" block="BFEE"  >
            </Placement>
            
            <Placement x="toff_ElecHgt" z="toff_Elecz(3)-toff_ElecLen/2" block="BFEE"  >
            </Placement>
            
            <Placement x="toff_ElecHgt" z="toff_Elecz(4)-toff_ElecLen/2" block="BFEE"  >
            </Placement>
            
            <Placement x="toff_ElecHgt" z="toff_Elecz(5)-toff_ElecLen/2" block="BFEE"  >
            </Placement>
            
            <Placement x="toff_ElecHgt" z="toff_Elecz(6)-toff_ElecLen/2" block="BFEE"  >
            </Placement>
            
            <Placement x="toff_ElecHgt" z="toff_Elecz(7)-toff_ElecLen/2" block="BFEE"  >
            </Placement>
            
            <Placement x="toff_ElecHgt" z="toff_Elecz(8)-toff_ElecLen/2" block="BFEE"  >
            </Placement>
            
            <Placement x="toff_ElecHgt" z="toff_Elecz(9)-toff_ElecLen/2" block="BFEE"  >
            </Placement>
            
            <Placement x="toff_ElecHgt" z="toff_Elecz(10)-toff_ElecLen/2" block="BFEE"  >
            </Placement>
            
            <Create block="BPLA"  />
            <Placement y="0" x="toff_ElecHgt" z="toff_Elecz(1)+toff_PlasPos" block="BPLA"  >
            </Placement>
            
            <Placement y="0" x="toff_ElecHgt" z="toff_Elecz(2)+toff_PlasPos" block="BPLA"  >
            </Placement>
            
            <Placement y="0" x="toff_ElecHgt" z="toff_Elecz(3)+toff_PlasPos" block="BPLA"  >
            </Placement>
            
            <Placement y="0" x="toff_ElecHgt" z="toff_Elecz(4)+toff_PlasPos" block="BPLA"  >
            </Placement>
            
            <Placement y="0" x="toff_ElecHgt" z="toff_Elecz(5)+toff_PlasPos" block="BPLA"  >
            </Placement>
            
            <Placement y="0" x="toff_ElecHgt" z="toff_Elecz(6)+toff_PlasPos" block="BPLA"  >
            </Placement>
            
            <Placement y="0" x="toff_ElecHgt" z="toff_Elecz(7)+toff_PlasPos" block="BPLA"  >
            </Placement>
            
            <Placement y="0" x="toff_ElecHgt" z="toff_Elecz(8)+toff_PlasPos" block="BPLA"  >
            </Placement>
            
            <Placement y="0" x="toff_ElecHgt" z="toff_Elecz(9)+toff_PlasPos" block="BPLA"  >
            </Placement>
            
            <Placement y="0" x="toff_ElecHgt" z="toff_Elecz(10)+toff_PlasPos" block="BPLA"  >
            </Placement>
            
        </Block>
        
        <Block name="BUPC" comment="is the up pcb cover of tofr"  >
            <Attribute for="BUPC" seen="0" colo="3"  />
            <Material name="G10"  />
            <Shape type="BOX" dz="tray_Length/2-tray_WallThk" dx="tray_WallThk/2" dy="tray_Width/2-tray_WallThk"  />
        </Block>
        
        <Block name="BRTC" comment="is the Main Tray Cavity filled with the details for TOFr (run3 or run4)"  >
            <Attribute for="BRTC" seen="0" colo="5"  />
            <Material name="HoneyComb"  />
            <Shape type="BOX" dz="tray_Length/2-tray_WallThk" dx="tray_Height/2-tray_WallThk" dy="tray_Width/2-tray_WallThk"  />
            <Create block="BGMT"  />
            <Placement konly="'MANY'" block="BGMT"  >
            </Placement>
            



            <Create block="BRMD"  />

            <If expr="tof==2"  >
                z0 = tray_Length/2 - 0.05 
                x0 = modr_X0Offset 
                <Do var="i" from="1" to="33"  >
                    <Placement x="x0+modr_mrpcX(i)" z="z0-modr_mrpcZ(i)" block="BRMD"  >
                        <Rotation alphay="modr_mrpcA(i)"  />
                    </Placement>
                    
                </Do>
                
                <Elif expr="tof==3"  >
                    z0 = tray_Length/2 - 0.05 - mod4_TrayEdgeZ 
                    x0 = mod4_X0Offset 
                    <Do var="i" from="1" to="32"  >
                        <If expr="i.le.20.or.(i.ge.25.and.i.le.28)"  >
                            <Placement x="x0+mod4_mrpcX(i)" z="z0-mod4_mrpcZ(i)" block="BRMD"  >
                                <Rotation alphay="mod4_mrpcA(i)"  />
                            </Placement>
                            
                        </If>
                        
                    </Do>
                    
                    <Elif expr="tof==4"  >
                        z0 = tray_Length/2 - 0.05 - mod5_TrayEdgeZ 
                        x0 = mod5_X0Offset 
                        <Do var="i" from="1" to="32"  >
                            <Placement x="x0+mod5_mrpcX(i)" z="z0-mod5_mrpcZ(i)" block="BRMD"  >
                                <Rotation alphay="mod5_mrpcA(i)"  />
                            </Placement>
                            
                        </Do>
                        
                        <Elif expr="tof==5"  >
                            <Elif expr="tof==6"  >
                                z0 = tray_Length/2 - mod7_TrayEdgeZ 
                                x0 = -tray_Height/2 + tray_WallThk 
                                <Do var="i" from="1" to="32"  >
                                    <Placement x="x0+mod7_mrpcX(i)" z="z0-mod7_mrpcZ(i)" block="BRMD"  >
                                        <Rotation alphay="mod7_mrpcA(i)"  />
                                    </Placement>
                                    
                                </Do>
                                

                                <Elif expr="tof==7"  >
                                    z0 = tray_Length/2 - mod7_TrayEdgeZ 
                                    x0 = -tray_Height/2 + tray_WallThk 
                                    <Do var="i" from="1" to="32"  >
                                        <Placement x="x0+mod7_mrpcX(i)" z="z0-mod7_mrpcZ(i)" block="BRMD"  >
                                            <Rotation alphay="mod7_mrpcA(i)"  />
                                        </Placement>
                                        
                                    </Do>
                                    


                                </Elif>
                                
                            </Elif>
                            
                        </Elif>
                        
                    </Elif>
                    
                </Elif>
                
            </If>
            
        </Block>
        
        <Block name="BGMT" comment="is the mixture gas box in tray that change the hc box into slim"  >
            <Attribute for="BGMT" seen="0" colo="2"  />
            <Material name="RPCgas"  />
            <Shape type="BOX" dz="tray_Length/2-tray_WallThk" dx="tray_Height/2-tray_WallThk" dy="tray_Width/2-tray_WallThk-modr_HBWid"  />
        </Block>
        
        <Block name="BMAA" comment="is a b1ox for a 4wide AND 5wide phi column of TOF Scintillators"  >
            <Attribute for="BMAA" seen="0" colo="2"  />
            <If expr="iwid==4"  >
                <Shape type="BOX" dz="sublen/2." dx="tray_height/2-tray_WallThk" dy="0.8*toff_BoxWidth/2"  />
                <Else  >
                    <Shape type="BOX" dz="toff_Slat5Z" dx="tray_height/2-tray_WallThk" dy="toff_BoxWidth/2"  />
                </Else>
                
            </If>
            
            <Create block="BMTD"  />
        </Block>
        
        <Block name="BMTD" comment="is a 5wide phi column of TOF Scintillators"  >
            <Attribute for="BMTD" seen="1" colo="1"  />
            <Shape type="DIVISION" ndiv="iwid" iaxis="2"  />
            <Create block="BASS"  />
            <If expr="iwid==5"  >
                <Placement x="toff_Slatx(1)" konly="'MANY'" block="BASS"  >
                    <Rotation alphay="toff_SlatAy(1)"  />
                </Placement>
                
                <Else  >
                    <Do var="islat" from="2" to="10"  >
                        <Placement x="toff_Slatx(islat)" z="toff_Slatz(islat)-subcen" konly="'MANY'" block="BASS"  >
                            <Rotation alphay="toff_SlatAy(islat)"  />
                        </Placement>
                        
                    </Do>
                    
                </Else>
                
            </If>
            
        </Block>
        
        <Block name="BASS" comment="is a single TOF Slat Assembly (slat+PMT+base)"  >
            <Attribute for="BASS" seen="0" colo="6"  />
            totlen = toff_SlatLen+toff_PmtLen+toff_BaseLen 
            <Shape type="BOX" dz="totlen/2." dx="toff_PmtMaxR" dy="(tray_Width/2-tray_WallThk)/5."  />
            zpos = -(totlen-toff_SlatLen)/2 
            <Create block="BCSB"  />
            <Placement z="zpos" block="BCSB"  >
            </Placement>
            
            zpos = zpos + (toff_SlatLen+toff_PmtLen)/2 
            <Create block="BCPM"  />
            <Placement rmin="toff_PmtMinR" rmax="toff_PmtMaxR" dz="toff_PmtLen/2" x="0" z="zpos" block="BCPM"  >
            </Placement>
            
            zpos = zpos + toff_PmtLen/2. 
            <Create block="BTSK"  />
            <Placement rmin="toff_PmtMinR" rmax="toff_PmtMaxR" dz="toff_SockLen/2" x="0" z="zpos+(toff_SockLen/2)" block="BTSK"  >
            </Placement>
            
            <Create block="BCEL"  />
            <Placement rmin="0" rmax="toff_PmtMinR" dz="toff_ElecThck/2" x="0" z="zpos+(toff_ElecThck/2)" block="BCEL"  >
            </Placement>
            
            zpos = zpos + toff_BaseLen/2 
            <Create block="BCEB" dz="toff_BaseLen/2" dx="toff_ElecThck/2" dy="toff_CellWid/2"  />
            <Placement x="toff_CellHgt/2" z="zpos" block="BCEB"  >
            </Placement>
            
            <Placement x="-toff_CellHgt/2" z="zpos" block="BCEB"  >
            </Placement>
            
            zpos = zpos + toff_BaseLen/2 - 0.6 
            <Create block="BCON"  />
            <Placement dy="toff_BconYLen/2" dz="toff_BconZLen/2" dx="(toff_CellHgt-toff_ElecThck)/2" y="0" x="0" z="zpos" block="BCON"  >
            </Placement>
            
        </Block>
        
        <Block name="BXSA" comment="is the active trigger scintillator SLAB for ctb"  >
            <Attribute for="BXSA" seen="0" colo="3"  />
            <Material name="polystyren"  />
            <Medium name="sensitive" isvol="1 "  />
            <Shape type="BOX" dz="0" dx="0" dy="0"  />
             <Instrument block="BXSA">

                <Hit meas="X" bins="0.01" opts="S" />
                <Hit meas="Y" bins="0.01"          />
                <Hit meas="Z" bins="0.01"          />

                <Hit meas="ptot" nbits="18" min="0.0" max="100.0"  />

                <Hit meas="cx"   nbits="10" />
                <Hit meas="cy"   nbits="10" />
                <Hit meas="cz"   nbits="10" />

                <Hit meas="sleng"  bins="0.1" min="0"   max="500"    />
                <Hit meas="tof"   nbits="16"  min="0.0" max="1.0E-6" />
                <Hit meas="step"   bins="0.01" />
                
                <Hit meas="eloss" nbits="16" min="0.0" max="0.01"    />
                
            </Instrument>
        </Block>
        
        <Block name="BCSB" comment="is the active trigger scintillator SLAB for tof"  >
            <Attribute for="BCSB" seen="1" colo="7"  />
            <Material name="polystyren"  />
            <Medium name="sensitive" isvol="1 "  />
            <Shape type="BOX" dz="toff_SlatLen/2" dx="toff_SlatThck/2" dy="toff_SlatWid/2"  />
            <Instrument block="BCSB">

                <Hit meas="X" bins="0.01" opts="S" />
                <Hit meas="Y" bins="0.01"          />
                <Hit meas="Z" bins="0.01"          />

                <Hit meas="ptot" nbits="18" min="0.0" max="100.0"  />

                <Hit meas="cx"   nbits="10" />
                <Hit meas="cy"   nbits="10" />
                <Hit meas="cz"   nbits="10" />

                <Hit meas="sleng"  bins="0.1" min="0"   max="500"    />
                <Hit meas="tof"   nbits="16"  min="0.0" max="1.0E-6" />
                <Hit meas="step"   bins="0.01" />
                
                <Hit meas="eloss" nbits="16" min="0.0" max="0.01"    />
                
            </Instrument>
        </Block>
        
        <Block name="BCCV" comment="is a Ctb optical ConVerter"  >
            <Attribute for="BCCV" seen="0" colo="3"  />
            <Material name="polystyren"  />
            <Shape type="TRD2" dx2="0" dx1="0" dy1="0" dz="0" dy2="0"  />
        </Block>
        
        <Block name="BCSK" comment="is a CTB Linear Base tube"  >
            <Attribute for="BCSK" seen="0" colo="2"  />
            <Material name="polystyren"  />
            <Shape type="TUBE" rmax="0" rmin="0" dz="0"  />
        </Block>
        
        <Block name="BZEL" comment="is a Ctb PM electronics"  >
            <Attribute for="BZEL" seen="0" colo="6"  />
            <Material name="silicon"  />
            <Shape type="BOX" dz="0" dx="0" dy="0"  />
        </Block>
        
        <Block name="BCPM" comment="is a PhotoMultiplier Tube (same for CTB and TOF)"  >
            <Attribute for="BCPM" seen="0" colo="1"  />
            <Material name="polystyren"  />
            <Shape type="TUBE" rmax="0" rmin="0" dz="0"  />
        </Block>
        
        <Block name="BTSK" comment="is the outer shell of a TOF CW Base"  >
            <Attribute for="BTSK" seen="0" colo="7"  />
            <Material name="polystyren"  />
            <Shape type="TUBE" rmax="0" rmin="0" dz="0"  />
        </Block>
        
        <Block name="BCEL" comment="is a circular G10 board in the CW Base for TOF"  >
            <Attribute for="BCEL" seen="0" colo="3"  />
            <Material name="G10"  />
            <Shape type="TUBE" rmax="0" rmin="0" dz="0"  />
        </Block>
        
        <Block name="BCEB" comment="is a square G10 board in the CW Base for TOF"  >
            <Attribute for="BCEL" seen="0" colo="3"  />
            <Material name="G10"  />
            <Shape type="BOX" dz="0" dx="0" dy="0"  />
        </Block>
        
        <Block name="BPLA" comment="is the plastic angle pieces that hold the upper foam supports..."  >
            <Attribute for="BPLA" seen="0" colo="4"  />
            <Material name="polystyren"  />
            <Shape type="BOX" dz="0" dx="0" dy="0"  />
            <Create block="BCON"  />
            <Placement dy="tray_Width/2-tray_WallThk-0.5" dz="toff_BconPLdz" dx="toff_BconPLdx/2" y="0" x="0" z="-toff_BconPLdz" block="BCON"  >
            </Placement>
            
            <Placement dy="tray_Width/2-tray_WallThk-2.0" dz="toff_BconPLdx/2" dx="toff_BconPLdz/2" y="0" x="(-toff_BconPLdx-toff_BconPLdz)/2" z="(-toff_BconPLdx)/2" block="BCON"  >
            </Placement>
            
        </Block>
        
        <Block name="BCON" comment="is a generic plastic block for various connectors, foam-support-angles, etc......"  >
            <Attribute for="BCON" seen="0" colo="6"  />
            <Material name="polystyren"  />
            <Shape type="BOX" dz="0" dx="0" dy="0"  />
        </Block>
        
        <Block name="BFEE" comment="is a G10 FrontEndElectronics board for TOF"  >
            <Attribute for="BFEE" seen="0" colo="3"  />
            <Material name="G10"  />
            <Shape type="BOX" dz="0" dx="0" dy="0"  />
            <Create block="BLEM"  />
            <Placement y="toff_BLEMPosY(1)" x="toff_BLEMPosX" z="toff_BLEMPosZ1" block="BLEM"  >
            </Placement>
            
            <Placement y="toff_BLEMPosY(2)" x="toff_BLEMPosX" z="toff_BLEMPosZ1" block="BLEM"  >
            </Placement>
            
            <Placement y="toff_BLEMPosY(3)" x="toff_BLEMPosX" z="toff_BLEMPosZ1" block="BLEM"  >
            </Placement>
            
            <Placement y="toff_BLEMPosY(4)" x="toff_BLEMPosX" z="toff_BLEMPosZ1" block="BLEM"  >
            </Placement>
            
            <Placement y="toff_BLEMPosY(5)" x="toff_BLEMPosX" z="toff_BLEMPosZ1" block="BLEM"  >
            </Placement>
            
            <Placement y="toff_BLEMPosY(6)" x="toff_BLEMPosX" z="toff_BLEMPosZ2" block="BLEM"  >
                <Rotation alphax="180"  />
            </Placement>
            
            <Placement y="toff_BLEMPosY(7)" x="toff_BLEMPosX" z="toff_BLEMPosZ2" block="BLEM"  >
                <Rotation alphax="180"  />
            </Placement>
            
            <Placement y="toff_BLEMPosY(8)" x="toff_BLEMPosX" z="toff_BLEMPosZ2" block="BLEM"  >
                <Rotation alphax="180"  />
            </Placement>
            
            <Placement y="toff_BLEMPosY(9)" x="toff_BLEMPosX" z="toff_BLEMPosZ2" block="BLEM"  >
                <Rotation alphax="180"  />
            </Placement>
            
            <Placement y="toff_BLEMPosY(10)" x="toff_BLEMPosX" z="toff_BLEMPosZ2" block="BLEM"  >
                <Rotation alphax="180"  />
            </Placement>
            
            <Placement y="toff_BLEMPosY(11)" x="toff_BLEMPosX" z="toff_BLEMPosZ2" block="BLEM"  >
                <Rotation alphax="180"  />
            </Placement>
            
            <Placement y="toff_BLEMPosY(12)" x="toff_BLEMPosX" z="toff_BLEMPosZ2" block="BLEM"  >
                <Rotation alphax="180"  />
            </Placement>
            
            <Placement y="toff_BLEMPosY(13)" x="toff_BLEMPosX" z="toff_BLEMPosZ2" block="BLEM"  >
                <Rotation alphax="180"  />
            </Placement>
            
            <Placement y="toff_BLEMPosY(14)" x="toff_BLEMPosX" z="toff_BLEMPosZ2" block="BLEM"  >
                <Rotation alphax="180"  />
            </Placement>
            
            <Placement y="toff_BLEMPosY(15)" x="toff_BLEMPosX" z="toff_BLEMPosZ2" block="BLEM"  >
                <Rotation alphax="180"  />
            </Placement>
            
        </Block>
        
        <Block name="BLEM" comment="is a Lemo connector on the FEE boards"  >
            <Attribute for="BLEM" seen="0" colo="3"  />
            <Shape type="BOX" dz="toff_BLEMLenZ/2" dx="toff_BLEMLenX/2" dy="toff_BLEMLenY/2"  />
            <Create block="BPIP"  />
            <Placement rmin="toff_BPIPRmin" rmax="toff_BPIPRmax" dz="toff_BPIPLenZ/2" y="0" x="toff_BPIPPosX" z="toff_BPIPPosZ" block="BPIP"  >
            </Placement>
            
        </Block>
        
        <Block name="BCOO" comment="are the cooling rails/loops"  >
            <Attribute for="BCOO" seen="0" colo="2"  />
            <Shape type="BOX" dz="0" dx="0" dy="0"  />
            <Create block="BRAI" dz="tray_Length/2-tray_WallThk" dx="toff_RailThck/2" dy="toff_RailWid/2"  />
            <Placement y="(tray_width/2-toff_RailWid/2-tray_WallThk)" x="toff_ElecHgt-toff_RailThck" konly="'MANY'" block="BRAI"  >
            </Placement>
            
            <Placement y="(tray_width/2-toff_RailThck/2-tray_WallThk)" x="toff_ElecHgt-toff_RailWid/2-toff_RailThck/2" konly="'MANY'" block="BRAI"  >
                <Rotation alphaz="90"  />
            </Placement>
            
            <Placement y="-(tray_width/2-toff_RailWid/2-tray_WallThk)" x="toff_ElecHgt-toff_RailThck" konly="'MANY'" block="BRAI"  >
            </Placement>
            
            <Placement y="-(tray_width/2-toff_RailThck/2-tray_WallThk)" x="toff_ElecHgt-toff_RailWid/2-toff_RailThck/2" konly="'MANY'" block="BRAI"  >
                <Rotation alphaz="90"  />
            </Placement>
            
            <Create block="BPIP" rmax="toff_CoolOutR" rmin="toff_CoolInnR" dz="tray_Length/2-tray_WallThk"  />
            <Placement y="(tray_width/2-toff_RailThck-tray_WallThk-toff_CoolOutR)" x="toff_ElecHgt-3.*toff_RailThck/2.-toff_CoolOutR" konly="'MANY'" block="BPIP"  >
            </Placement>
            
            <Placement y="-(tray_width/2-toff_RailThck-tray_WallThk-toff_CoolOutR)" x="toff_ElecHgt-3.*toff_RailThck/2.-toff_CoolOutR" konly="'MANY'" block="BPIP"  >
            </Placement>
            
            <Create block="BPIQ" rmax="toff_CoolOutR" rmin="toff_CoolInnR" dz="tray_width/2-tray_WallThk-2.*toff_CoolOutR-toff_RailThck"  />
            <Placement y="0.0" x="toff_ElecHgt-3.*toff_RailThck/2.-toff_CoolOutR" z="tray_Length/2-tray_WallThk-toff_RailThck-toff_CoolOutR" konly="'MANY'" block="BPIQ"  >
                <Rotation alphax="90"  />
            </Placement>
            
            <Create block="BWAT" 
                    rmax="toff_CoolInnR" 
                    rmin="0" 
                    dz="tray_Length/2-tray_WallThk"  
            />

            <Placement block="BWAT" 
                       x="toff_ElecHgt-3.*toff_RailThck/2.-toff_CoolOutR"
                       y="(tray_width/2-toff_RailThck-tray_WallThk-toff_CoolOutR)" 
                       />

            
            <Placement block="BWAT" 
                       x="toff_ElecHgt-3.*toff_RailThck/2.-toff_CoolOutR" 
                       y="-(tray_width/2-toff_RailThck-tray_WallThk-toff_CoolOutR)"  
                       />
            

            <Create block="BWAT" 
                    rmax="toff_CoolInnR" 
                    rmin="0" 
                    dz="tray_width/2-tray_WallThk-2.*toff_CoolOutR-toff_RailThck"  
                    />

            <Placement block="BWAT" 
                       x="toff_ElecHgt-3.*toff_RailThck/2.-toff_CoolOutR" 
                       y="0.0"
                       z="tray_Length/2-tray_WallThk-toff_RailThck-toff_CoolOutR">
                <Rotation alphax="90"  />
            </Placement>
            
        </Block>
        
        <Block name="BRAI" comment="is the Rail for the cooling loop"  >
            <Attribute for="BRAI" seen="0" colo="7"  />
            <Material name="Aluminium"  />
            <Shape type="BOX" dz="0.0" dx="0.0" dy="0.0"  />
        </Block>
        
        <Block name="BPIP" comment="is the Long Pipe for the cooling loop"  >
            <Attribute for="BPIP" seen="0" colo="7"  />
            <Material name="Aluminium"  />
            <Shape type="TUBE" rmax="0" rmin="0" dz="0"  />
        </Block>
        
        <Block name="BPIQ" comment="is the Short Pipe for the cooling loop"  >
            <Attribute for="BPIQ" seen="0" colo="7"  />
            <Material name="Aluminium"  />
            <Shape type="TUBE" rmax="0" rmin="0" dz="0"  />
        </Block>
        
        <Block name="BUND" comment="is Undercarriage support tray - same both for CTB and TOF"  >
            <Attribute for="BUND" seen="0" serial="0" colo="1"  />
            <Shape type="BOX" dz="tray_SupLen/2" dx="tray_SupFullH/2" dy="tray_Width/2"  />
            <Material name="Aluminium"  />
            xpos = (tray_SupFullH - tray_FootThk)/2 
            ypos = (tray_width - tray_Foot1Len)/2 - tray_FootInse  
            <Create block="BTFT"  />
            <Placement dx="tray_FootThk/2" dy="tray_Foot1Len/2" y="-ypos" x="xpos" block="BTFT"  >
            </Placement>
            
            <Placement dx="tray_FootThk/2" dy="tray_Foot1Len/2" y="+ypos" x="xpos" block="BTFT"  >
            </Placement>
            
            xpos = (tray_SupFullH - tray_Foot2Thk)/2 
            ypos = ypos - (tray_Foot1Len + tray_FootThk)/2  
            <Placement dx="tray_Foot2Thk/2" dy="tray_FootThk/2" y="-ypos" x="xpos" block="BTFT"  >
            </Placement>
            
            <Placement dx="tray_Foot2Thk/2" dy="tray_FootThk/2" y="+ypos" x="xpos" block="BTFT"  >
            </Placement>
            
            xpos = (tray_SupFullH + tray_FootThk)/2 - tray_Foot2Thk  
            ypos = ypos - (tray_FootThk + tray_Foot3Len)/2 
            <Placement dx="tray_FootThk/2" dy="tray_Foot3Len/2" y="-ypos" x="xpos" block="BTFT"  >
            </Placement>
            
            <Placement dx="tray_FootThk/2" dy="tray_Foot3Len/2" y="+ypos" x="xpos" block="BTFT"  >
            </Placement>
            
            support_aile_width = ( tray_SupFullH-tray_SupArmT )/tan(60*DegRad)  
            support_arm_width  = ( tray_SupFullW-tray_SupBaseW)/2-support_aile_width 
            support_aile_Ypos  = ( tray_SupBaseW+Support_Aile_width)/2 
            support_arm_Xpos   = ( tray_SupFullH-tray_SupArmT )/2 
            support_arm_Ypos   = ( tray_SupFullW-Support_Arm_width)/2 
            <Material name="Aluminium"  />
            <Create block="BASE"  />
            <Placement x="(-tray_SupFullH+tray_SupBaseT)/2" block="BASE"  >
            </Placement>
            
            <Create block="BARM"  />
            <Placement y="-support_arm_Ypos" x="support_arm_Xpos" block="BARM"  >
            </Placement>
            
            <Placement y="+support_arm_Ypos" x="support_arm_Xpos" block="BARM"  >
            </Placement>
            
            <Create block="BANG"  />
            <Placement y="-support_aile_Ypos" block="BANG"  >
            </Placement>
            
            <Placement y="+support_aile_Ypos" block="BANG"  >
                <Rotation thetax="270"  />
            </Placement>
            
            <Create block="BCOV"  />
            <Placement x="-tray_SupFullH/2+tray_CoolOutR" block="BCOV"  >
            </Placement>
            
        </Block>
        
        <Block name="BTFT" comment="is the Foot structure ( Material Aluminium )"  >
            <Attribute for="BTFT" seen="0" colo="2"  />
            <Shape type="BOX" dz="0.0" dx="0.0" dy="0.0"  />
        </Block>
        
        <Block name="BARM" comment="is a TPC cooling structure arm ( Material Aluminium )"  >
            <Attribute for="BARM" seen="0" colo="2"  />
            <Shape type="BOX" dx="tray_SupArmT/2" dy="support_arm_width/2"  />
        </Block>
        
        <Block name="BANG" comment="is an angled part of TPC cooling structure ( Aile )"  >
            <Attribute for="BANG" seen="0" colo="2"  />
            <Shape type="PARA" phi="0" thet="0" dx="tray_SupArmT/2" dy="support_aile_width/2" alph="-60"  />
        </Block>
        
        <Block name="BASE" comment="is a bottom of TPC coolant structure"  >
            <Attribute for="BASE" seen="0" colo="2"  />
            <Shape type="BOX" dx="tray_SupBaseT/2" dy="tray_SupBaseW/2"  />
        </Block>
        

        <Block name="BCOV" comment="is a whole TPC cooling channel"  >
            <Attribute for="BCOV" seen="0" colo="2"  />
            <Shape type="TUBE" rmax="tray_CoolOutR" rmin="0"  />

            <Create block="BWAT" rmin="0" rmax="tray_CoolInnR" />
            <Placement block="BWAT" />
            
        </Block>
        
        <Block name="BWAT" comment="is TPC cooling water"  >
            <Attribute for="BWAT" seen="0" colo="3"  />
            <Mixture name="Water" dens="1.0"  >
                <Component name="H2" a="1" z="1" w="2"  />
                <Component name="O" a="16" z="8" w="1"  />
            </Mixture>
            
            <Shape type="TUBE" rmax="0" rmin="0"  />
        </Block>
        

        <Block name="BRMD" comment="is a six channel module for TOFr"  >
            <Attribute for="BRMD" seen="0" colo="6"  />
            <Material name="RPCgas"  />
            <Shape type="BOX" dz="modr_Length/2" dx="modr_Height/2" dy="modr_Width/2"  />
            <Create block="BRHC"  />
            <Create block="BRCB"  />
            <Create block="BRMY"  />
            <Create block="BRGR"  />
            <Create block="BROG"  />
            DTHgt = (modr_IGHgt+modr_SPRMax*2)*(modr_NGap-1)+modr_SPRMax*2 
            <Create block="BRDT" dz="modr_IGLen/2." konly="'MANY'" dx="DTHgt/2." dy="modr_IGWid/2."  />
            <Create block="BRWG"  />

            XPOS = modr_Height/2. 
            Y = 0. 
            Z = modr_Center 

            <Placement x="XPOS-modr_HCHgt/2" z="modr_Center" block="BRHC"  >
            </Placement>
            
            XPOS = XPOS - modr_HCHgt 

            <Placement x="XPOS-modr_PCBHgt/2" z="0." block="BRCB"  >
            </Placement>
            
            XPOS = XPOS - modr_PCBHgt 

            <Placement x="XPOS-modr_MYHgt/2" z="modr_Center" block="BRMY"  >
            </Placement>
            
            XPOS = XPOS - modr_MYHgt 

            <Placement x="XPOS-modr_GRHgt/2" block="BRGR"  >
            </Placement>
            
            XPOS = XPOS - modr_GRHgt 

            <Placement x="XPOS-modr_OGHgt/2" block="BROG"  >
            </Placement>
            
            XPOS = XPOS - modr_OGHgt 

            <Placement x="XPOS-DTHgt/2" block="BRDT"  >
            </Placement>
            
            XPOS = XPOS - DTHgt 

            <Placement x="XPOS-modr_OGHgt/2" block="BROG"  >
            </Placement>
            
            XPOS = XPOS - modr_OGHgt 
            <Placement x="XPOS-modr_GRHgt/2" block="BRGR"  >
            </Placement>
            
            XPOS = XPOS - modr_GRHgt 

            <Placement x="XPOS-modr_MYHgt/2" block="BRMY"  >
            </Placement>
            
            XPOS = XPOS - modr_MYHgt 
            <Placement x="XPOS-modr_PCBHgt/2" z="0." block="BRCB"  >
            </Placement>
            
            XPOS = XPOS - modr_PCBHgt 

            <Placement x="XPOS-modr_HCHgt/2" z="modr_Center" block="BRHC"  >
            </Placement>
            
            XPOS = XPOS - modr_HCHgt 

        </Block>
        
        <Block name="BRHC" comment="is the HoneyComb in the TOFr module"  >
            <Attribute for="BRHC" seen="1" colo="1"  />
            <Material name="HoneyComb"  />
            <Shape type="BOX" dz="modr_HCLen/2" dx="modr_HCHgt/2" dy="modr_HCWid/2"  />
        </Block>
        

        <Block name="BRCB" comment="is the PCB in the TOFr module"  >
            <Attribute for="BRCB" seen="1" colo="3"  />
            <Material name="G10"  />
            <Shape type="BOX" dz="modr_PCBLen/2" dx="modr_PCBHgt/2" dy="modr_PCBWid/2"  />
        </Block>
        

        <Block name="BRMY" comment="is the MYlar in the TOFr module"  >
            <Attribute for="BRMY" seen="0" colo="1"  />
            <Material name="MYLAR"  />
            <Shape type="BOX" dz="modr_MYLen/2" dx="modr_MYHgt/2" dy="modr_MYWid/2"  />
        </Block>
        

        <Block name="BRGR" comment="is the GRaphite in the TOFr module"  >
            <Attribute for="BRGR" seen="0" colo="1"  />
            <Material name="Carbon"  />
            <Shape type="BOX" dz="modr_GrLen/2" dx="modr_GRHgt/2" dy="modr_GRWid/2"  />
        </Block>
        

        <Block name="BROG" comment="is the Outer Glass in the TOFr module"  >
            <Attribute for="BROG" seen="1" colo="7"  />
            <Mixture name="Glass" dens="2.2"  >
                <Component name="Si" a="28" z="14" w="1."  />
                <Component name="O" a="16" z="8" w="2."  />
            </Mixture>
            
            <Shape type="BOX" dz="modr_OGLen/2" dx="modr_OGHgt/2" dy="modr_OGWid/2"  />
        </Block>
        

        <Block name="BRDT" comment="is the middle part (including innner glass and gas)in the MRPC"  >
            <Attribute for="BRDT"  />
            <Shape type="BOX"  />
            <Create block="BRIG" konly="'MANY'"  />
            <Create block="BRSG" konly="'MANY'"  />
            XPOS = DTHgt/2. 
            Y    = 0. 
            Z    = 0. 
            <Do var="igap" from="1" to="modr_NGap-1"  >
                <Placement x="XPOS-modr_SPRMax" block="BRSG"  >
                </Placement>
                
                XPOS = XPOS - modr_SPRMax*2. 

                <Placement x="XPOS-modr_IGHgt/2" block="BRIG"  >
                </Placement>
                
                XPOS = XPOS - modr_IGHgt 
            </Do>
            

            <Placement x="XPOS-modr_SPRMax" block="BRSG"  >
            </Placement>
            
            XPOS = XPOS - modr_SPRMax*2. 


        </Block>
        




        <Block name="BRIG" comment="is the Inner Glass in the TOFr module"  >
            <Attribute for="BRIG" seen="1" colo="7"  />
            <Material name="Glass"  />
            <Shape type="BOX" dz="modr_IGLen/2" dx="modr_IGHgt/2" dy="modr_IGWid/2"  />
        </Block>
        

        <Block name="BRSG" comment="is the sensitive gas layer in the TOFr module"  >
            <Attribute for="BRSG" seen="0" colo="5"  />
            <Material name="RPCgas"  />
            <Medium name="sensitive" isvol="1 "  />
            <Shape type="BOX" dz="modr_IGLen/2" dx="modr_IGHgt/2" dy="modr_IGWid/2"  />
            <Instrument block="BRSG">

                <Hit meas="X" bins="0.01" opts="HS" />
                <Hit meas="Y" bins="0.01"          />
                <Hit meas="Z" bins="0.01"          />

                <Hit meas="ptot" nbits="18" min="0.0" max="100.0"  />

                <Hit meas="sleng"  bins="0.1" min="0"   max="500"    />
                <Hit meas="tof"   nbits="16"  min="0.0" max="1.0E-7" />
                <Hit meas="step"   bins="0.01" />
                
                <Hit meas="eloss" nbits="16" min="0.0" max="1.0E-6"    />
                
            </Instrument>
        </Block>
        
        <Block name="BRWG" comment="is the WedGe(support) in the TOFr module"  >
            <Attribute for="BRWG" seen="0"  />
            <Mixture name="Lucite" dens="1.18"  >
                <Component name="O" a="16" z="8" w="2"  />
                <Component name="C" a="12" z="6" w="5"  />
                <Component name="H" a="1" z="1" w="8"  />
            </Mixture>
            
            <Shape type="TUBE" rmax="modr_WGRMax" rmin="modr_WGRMin" dz="modr_WGLen/2"  />
        </Block>
        


    </Module>
    



</Document>

