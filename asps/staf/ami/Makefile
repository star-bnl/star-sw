# SLMakefile.MAIN - put in base directory of package (pkg)
#?---- pkg/Makefile - create STAF ASPs, PAMs libraries & binaries -----
# DO NOT EDIT THIS FILE - USE "make reset" FROM BASE DIRECTORY OR
# EDIT THE USER FILES Makefile.control AND Makefile.user
#######################################################################
.PHONY: all clean test help setup config install default
#
VERSION			:= "$Id: Makefile,v 1.3 1997/01/30 22:16:25 tull Exp $"
#
default: all
#
#?make all         - Make libraries and binaries.
all: setup config inc_all src_all lib_all bin_all doc_all
%_all:
	@cd $*; $(MAKE) all
#
#?make install     - Install local files in $STAR_LIB/dev area.
install: inc_install src_install lib_install bin_install doc_install
%_install:
	@cd $*; $(MAKE) install
#
#?make clean       - Remove all generated files from local directories.
clean: inc_clean src_clean lib_clean bin_clean doc_clean
%_clean:
	@cd $*; $(MAKE) clean
#
#?make config      - Create configuration file from Makefile.control.
config:
	@$(MAKE) -f $(SLM_DIR)/config.mk
#
#?make setup       - Setup local directory to SLM standard environment.
setup:
	@$(MAKE) -f $(SLM_DIR)/setup.mk
#
#?make reset       - Reset all Makefiles to most recent version of SLM.
reset:
	@$(MAKE) -f $(SLM_DIR)/setup.mk reset
#
#?make empty       - Empty and prepare local directories for SLM test.
#?                   WARNING!!! - This target deletes ALL local files
#?                   and creates a set of test files in their place.
empty:
	rm -r *
	tar xvf $(SLM_DIR)/empty.tar
	cp -i $(SLM_DIR)/SLMakefile Makefile
#
#?make test        - Test current environment for SLM compatability.
test:
	@echo " The following variables must be properly defined: "
	@echo "          SLM_DIR = " $(SLM_DIR)
	@echo "        STAR_ARCH = " $(STAR_ARCH)
	@echo "          CVSROOT = " $(CVSROOT)
#
#?make help        - Show help for SLMakefile targets.
help:
	@$(SLM_DIR)/help $(SLM_DIR)
#
Makefile: $(SLM_DIR)/SLMakefile.MAIN
	cp $< $@
#
